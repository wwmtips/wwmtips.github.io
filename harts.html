<div class="quest-detail-container" style="text-align: left; position: relative;">
    
    <div style="border-bottom: 2px solid var(--wuxia-accent-red); padding-bottom: 15px; margin-bottom: 20px;">
        <span style="background-color: var(--wuxia-accent-gold); color: #fff; padding: 2px 8px; border-radius: 2px; font-weight: bold; font-size: 0.8em; vertical-align: middle;">가이드</span>
        <h2 style="color: var(--wuxia-accent-gold); display: inline-block; margin: 0 0 0 10px; vertical-align: middle;">
            심법 도감
        </h2>
    </div>

    <div style="margin-bottom: 20px; text-align: right;">
        <button onclick="openGuideSheet()" class="guide-action-btn">
            📖 육성 가이드 및 팁 보기
        </button>
    </div>

    <div id="heart-library-list" class="heart-library-grid">
        <div style="text-align: center; padding: 40px; color: #999;">
            데이터를 불러오는 중...
        </div>
    </div>

    <div id="guide-overlay" class="bottom-sheet-overlay" onclick="closeGuideSheet(); closeHeartDetailSheet()"></div>

    <div id="guide-sheet" class="bottom-sheet">
        <div class="sheet-header">
            <h3>심법 육성 가이드</h3>
            <button onclick="closeGuideSheet()" class="close-sheet-btn">✕</button>
        </div>

        <div class="sheet-content">
            <div class="detail-chunk" style="margin-bottom: 30px;">
                <div style="background-color: #fffcf5; border: 1px solid var(--wuxia-accent-gold); padding: 15px; border-radius: 4px;">
                    <p style="margin: 0 0 10px 0; color: var(--wuxia-accent-red);"><strong>📍 개요</strong></p>
                    <p style="margin: 0; color: #333; font-size: 0.95em; line-height: 1.6;">
                        심법은 메뉴의 <strong>[육성]</strong> 탭에서 확인할 수 있는 패시브 능력입니다.<br>
                        각 심법의 노드를 해금하여 강화하려면 <strong>'심득'</strong>이라는 재료가 필요하며, 하나의 심법을 완전히 돌파하는 것은 장기간의 노력이 필요한 <strong>엔드게임 콘텐츠</strong>입니다.
                    </p>
                </div>
            </div>

            <div class="detail-chunk" style="margin-bottom: 30px;">
                <h4 style="color: #333; border-left: 4px solid var(--wuxia-accent-red); padding-left: 10px; margin-bottom: 10px; font-weight: bold;">
                    필수 심법: '결의의 노래'
                </h4>
                <p style="color: #666; line-height: 1.6; font-size: 0.95em;">
                    한 빌드에 4개의 심법이 필요하므로, 초반부터 주력 심법을 정해 자원을 집중해야 합니다. 아직 빌드를 정하지 못했다면, 모든 빌드에서 공통으로 사용되는 <strong>'결의의 노래'</strong>에 우선 투자하세요.
                </p>
            </div>

            <div class="detail-chunk" style="margin-bottom: 30px;">
                <h4 style="color: #333; border-left: 4px solid var(--wuxia-accent-red); padding-left: 10px; margin-bottom: 10px; font-weight: bold;">
                    획득 방법 1: 심력 사용
                </h4>
                <div style="background-color: #f9f9f9; padding: 15px; border-radius: 4px;">
                    <ul style="color: #555; line-height: 1.6; padding-left: 20px; margin: 0; font-size: 0.9em;">
                        <li><strong>진수전 보스:</strong> 빨간 모자 아이콘</li>
                        <li><strong>거점:</strong> 빨간 탑 아이콘</li>
                        <li><strong>검무장:</strong> 심력 60 소모, 상자 3개 (첫 처치 시 +3개)</li>
                    </ul>
                </div>
            </div>

            <div class="detail-chunk" style="margin-bottom: 30px;">
                <h4 style="color: #333; border-left: 4px solid var(--wuxia-accent-red); padding-left: 10px; margin-bottom: 10px; font-weight: bold;">
                    획득 방법 2: 회수 및 교체
                </h4>
                <div style="background-color: #f9f9f9; padding: 15px; border-radius: 4px;">
                    <ol style="color: #555; line-height: 1.6; padding-left: 20px; margin: 0; font-size: 0.9em;">
                        <li>인벤토리에서 필요 없는 심득 <strong>'회수'</strong> (주력 심득 잠금 필수!)</li>
                        <li>획득한 '진귀한 서표'로 상점에서 원하는 유파 상자 구매</li>
                    </ol>
                </div>
            </div>
             <div class="detail-chunk" style="margin-bottom: 40px;">
                <h4 style="color: #333; border-left: 4px solid var(--wuxia-accent-red); padding-left: 10px; margin-bottom: 10px; font-weight: bold;">
                    획득 방법 3: 심법 변환 
                </h4>
                <p style="color: #666; line-height: 1.6; font-size: 0.95em;">
                    두 심법 간에 <strong>심득 개수</strong>를 맞바꾸는 기능입니다. 시즌당 무료 4회 가능합니다.
                </p>
            </div>
            <div style="height: 50px;"></div> 
        </div>
    </div>

    <div id="heart-detail-sheet" class="bottom-sheet">
        <div class="sheet-header">
            <h3 id="heart-sheet-title">심법 상세</h3>
            <button onclick="closeHeartDetailSheet()" class="close-sheet-btn">✕</button>
        </div>
        <div class="sheet-content" id="heart-sheet-content">
            </div>
    </div>

    <style>
        /* 심법 상세 시트 활성화 스타일 (body에 클래스가 붙으면 시트가 올라옴) */
        body.heart-sheet-open #heart-detail-sheet {
            transform: translateY(0);
        }
        
        /* 상세 시트가 열려있을 때 오버레이 표시 */
        body.heart-sheet-open #guide-overlay {
            display: block;
            opacity: 1;
        }
    </style>

</div>
