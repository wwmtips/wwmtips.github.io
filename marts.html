<div class="quest-detail-container max-w-4xl mx-auto space-y-8 p-4 lg:p-0 text-left relative" id="mart-guide-container">
    
    <div class="border-b-2 border-blue-600 pb-6 mb-6">
        <div class="space-y-2">
            <div class="flex items-center gap-3">
                <span class="bg-blue-600 text-white text-[10px] font-black px-2 py-0.5 rounded uppercase tracking-wider">Martial</span>
                <span class="text-gray-400 text-sm font-medium">무공 비결 도감</span>
            </div>
            <h2 class="text-3xl font-black text-gray-900 leading-tight">비결</h2>
            <p class="text-gray-500 text-[14px] mt-2 font-medium">강호에 흩어진 비결들을 확인하고 획득 경로를 파악하세요.</p>
        </div>
    </div>

    <div id="mart-library-list" class="heart-library-grid">
        <div class="col-span-full text-center py-20">
            <div class="inline-block w-8 h-8 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-4"></div>
            <p class="text-gray-400 text-sm font-medium">비급을 펼치는 중...</p>
        </div>
    </div>

    <div id="guide-overlay" class="fixed inset-0 bg-black/60 z-[11000] hidden opacity-0 transition-opacity duration-300 pointer-events-none" onclick="closeMartDetailSheet()"></div>

    <div id="mart-detail-sheet" class="fixed bottom-0 left-0 right-0 bg-white rounded-t-[32px] shadow-2xl z-[11001] translate-y-full transition-transform duration-300 ease-out flex flex-col max-h-[85vh]">
        <div class="sheet-header flex items-center justify-between px-6 py-5 border-b border-gray-100">
            <h3 id="mart-sheet-title" class="text-lg font-black text-gray-900 tracking-tight">비결 상세</h3>
            <button onclick="closeMartDetailSheet()" class="w-10 h-10 flex items-center justify-center bg-gray-50 rounded-full text-gray-400 hover:text-gray-900 transition-colors">✕</button>
        </div>
        <div class="sheet-content flex-1 overflow-y-auto p-6 scrollbar-hide text-left" id="mart-sheet-content">
            </div>
        <div class="h-8 bg-white flex-none"></div>
    </div>

    <style>
        /* 1. 반응형 그리드 시스템 (모바일 최적화) */
        .heart-library-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        @media (min-width: 640px) { .heart-library-grid { grid-template-columns: repeat(4, 1fr); } }
        @media (min-width: 1024px) { .heart-library-grid { grid-template-columns: repeat(6, 1fr); } }

        /* 2. 개별 아이템 카드 스타일 (JS 생성 요소용) */
        .heart-lib-item {
            background: #fff;
            border: 1px solid #f3f4f6;
            border-radius: 16px;
            padding: 16px 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 1px 2px rgba(0,0,0,0.02);
            cursor: pointer;
        }
        .heart-lib-item:hover {
            border-color: #3b82f6; /* blue-500 */
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.1);
        }
        .heart-lib-img {
            width: 48px;
            height: 48px;
            object-fit: contain;
            margin-bottom: 10px;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.05));
        }
        .heart-lib-name {
            font-size: 12px;
            font-weight: 700;
            color: #374151; /* gray-700 */
            text-align: center;
            line-height: 1.3;
            word-break: keep-all;
        }

        /* 3. 시트 애니메이션 제어 */
        body.mart-sheet-open { overflow: hidden; }
        body.mart-sheet-open #guide-overlay { display: block; opacity: 1; pointer-events: auto; }
        body.mart-sheet-open #mart-detail-sheet { transform: translateY(0); }

        /* PC 화면 시트 너비 제한 */
        @media (min-width: 768px) {
            #mart-detail-sheet {
                width: 480px;
                left: 50%;
                margin-left: -240px;
                border-radius: 32px 32px 0 0;
            }
        }

        /* 스크롤바 숨김 처리 */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</div>
