<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì—°ìš´: í•œêµ­ ìœ„í‚¤</title>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5SMVDZTDST"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-5SMVDZTDST');
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        /* [ê¸°ë³¸ ì„¤ì •] */
        :root {
            --bg-main: #f2f4f6;       
            --bg-card: #ffffff;       
            --text-main: #191f28;     
            --text-sub: #8b95a1;      
            --border-color: #f2f4f6;  
            --primary: #3182f6;       
            --nav-bg: rgba(255,255,255,0.95);
        }

        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--bg-main); color: var(--text-main); -webkit-tap-highlight-color: transparent; padding-bottom: 80px; overflow-x: hidden; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* [í—¤ë”] - ì²¨ë¶€ ì´ë¯¸ì§€(1000029537.jpg) ìŠ¤íƒ€ì¼ */
        .app-header { 
            background: var(--bg-card); padding: 0 20px; 
            display: flex; align-items: center; justify-content: space-between; gap: 12px;
            position: sticky; top: 0; z-index: 50; height: 60px; 
            border-bottom: 1px solid var(--border-color);
        }
        
        /* 1. ë©”ì¸ ëª¨ë“œ (ë¡œê³  + ì•„ì´ì½˜) */
        #header-main-mode { width: 100%; display: flex; align-items: center; justify-content: space-between; }
        .logo-img { height: 24px; width: auto; object-fit: contain; } /* ë¡œê³  í¬ê¸° ì¡°ì • */
        
        .header-actions { display: flex; align-items: center; gap: 16px; }
        .header-icon-btn { width: 24px; height: 24px; color: #333; cursor: pointer; display: flex; align-items: center; justify-content: center; }

        /* 2. ê²€ìƒ‰ ëª¨ë“œ (í•­ìƒ ë…¸ì¶œ ì•„ë‹˜, ë²„íŠ¼ í´ë¦­ ì‹œ í† ê¸€) */
        #header-search-layer { 
            position: absolute; top: 0; left: 0; right: 0; height: 60px; 
            background: #fff; display: none; align-items: center; padding: 0 20px; z-index: 60;
        }
        .header-search-box { 
            flex: 1; background: #f2f4f6; border-radius: 8px; height: 40px; 
            display: flex; align-items: center; padding: 0 12px; 
        }
        .header-search-input { background: transparent; border: none; width: 100%; height: 100%; font-size: 15px; outline: none; color: #333; margin-left: 8px; }

        /* [ì‚¬ì´ë“œë°”] - ì²¨ë¶€ ì´ë¯¸ì§€(1000029533.jpg) ìŠ¤íƒ€ì¼ */
        #main-sidebar { 
            position: fixed; top: 0; right: -100%; width: 100%; height: 100%; 
            background: #fff; z-index: 3000; transition: right 0.3s ease-in-out; 
            display: flex; flex-direction: column;
        }
        #main-sidebar.active { right: 0; }
        
        .sidebar-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 20px; border-bottom: 1px solid #f2f4f6;
        }
        .sidebar-back-btn { font-size: 24px; color: #333; cursor: pointer; }
        .sidebar-actions { display: flex; gap: 20px; }
        .sidebar-icon { width: 24px; height: 24px; color: #333; cursor: pointer; }

        .sidebar-content { padding: 20px; overflow-y: auto; flex: 1; }
        .sidebar-menu-group { margin-bottom: 30px; }
        .sidebar-group-title { font-size: 13px; color: #8b95a1; margin-bottom: 15px; font-weight: 500; }
        .sidebar-item { 
            display: flex; align-items: center; gap: 12px; 
            padding: 12px 0; font-size: 16px; font-weight: 600; color: #333; cursor: pointer; 
        }
        .sidebar-item-icon { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 18px; }
        .sidebar-item-sub { font-size: 13px; color: #8b95a1; font-weight: 400; margin-left: auto; }

        /* [ì²­í¬(Chunk)] - í† ìŠ¤ ìŠ¤íƒ€ì¼ (í°ìƒ‰ ë°•ìŠ¤) */
        .toss-section { 
            background: var(--bg-card); 
            border-radius: 0; 
            padding: 24px 20px; 
            margin: 0; 
            border-bottom: 12px solid var(--bg-main); 
        }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .section-title { font-size: 20px; font-weight: 800; color: var(--text-main); }
        .section-more { font-size: 13px; color: #8b95a1; font-weight: 600; cursor: pointer; }

        /* [í•  ì¼ (Today's Todo)] - ë””ìì¸ ê°œì„  (ë„“ì€ ì¹´ë“œí˜•) */
        /* timer.jsì—ì„œ ìƒì„±í•˜ëŠ” .timer-row í´ë˜ìŠ¤ë¥¼ ë®ì–´ì”ë‹ˆë‹¤ */
        #gangho-timer-list { display: flex; flex-direction: column; gap: 12px; }
        
        .timer-row {
            background-color: #fff; 
            border: 1px solid #eee; /* í…Œë‘ë¦¬ ì¶”ê°€ */
            border-radius: 16px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            padding: 16px; 
            margin-bottom: 0; /* gapìœ¼ë¡œ ê°„ê²© ì¡°ì • */
            display: flex; justify-content: space-between; align-items: center; cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03); /* ì‚´ì§ ê·¸ë¦¼ì */
            transition: transform 0.1s;
        }
        .timer-row:active { transform: scale(0.98); background-color: #f9f9f9; }

        .timer-icon-box {
            width: 40px; height: 40px; background: #fff1f1; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; margin-right: 12px; flex-shrink: 0;
        }
        .timer-info { display: flex; flex-direction: column; gap: 4px; flex: 1; }
        .timer-name { font-size: 16px; font-weight: 700; color: #333; display: flex; align-items: center; gap: 6px; }
        .timer-desc { font-size: 12px; color: #888; }
        
        .timer-clock { 
            font-family: 'Roboto Mono', monospace; font-size: 14px; font-weight: 700; color: var(--primary); 
            background: #e8f3ff; padding: 4px 8px; border-radius: 6px; /* ì‹œê°„ ë±ƒì§€ ìŠ¤íƒ€ì¼ */
        } 
        .timer-clock.urgent { color: #e53935; background: #ffebee; }
        .timer-progress-text { font-size: 13px; font-weight: 700; color: var(--primary); }

        /* [ë¬´ë¦¼ë¡/ì²œì§€ë¡ ë¦¬ìŠ¤íŠ¸] - ì‹¬í”Œ ë¦¬ìŠ¤íŠ¸ ìœ ì§€ */
        .mansarok-btn, .chunji-item-card { 
            display: flex !important; align-items: center; justify-content: space-between !important; 
            padding: 14px 0 !important; border-bottom: 1px solid #f2f4f6 !important; 
            background: transparent !important; box-shadow: none !important; 
            border: none !important; border-radius: 0 !important;
            margin-bottom: 0 !important; width: 100% !important; height: auto !important; min-height: auto !important;
            flex-direction: row !important; gap: 10px !important;
        }
        .mansarok-btn:last-child, .chunji-item-card:last-child { border-bottom: none !important; }
        
        .list-loc-badge {
            font-size: 11px; color: #8b95a1; background: #f2f4f6; 
            padding: 2px 6px; border-radius: 4px; font-weight: 600; margin-right: 4px; flex-shrink: 0;
        }

        .mansarok-btn span, .chunji-card-title { 
            font-size: 15px; font-weight: 600; color: #333; text-align: left; flex: 1;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        .mansarok-btn::after, .chunji-item-card::after {
            content: 'â€º'; font-size: 18px; color: #d1d5db; font-weight: 400; margin-left: auto;
        }

        /* [ìŠ¬ë¼ì´ë”] */
        .hero-section { margin: 0; border-radius: 0; overflow: hidden; border-bottom: 8px solid var(--bg-main); }
        .hero-slider-wrapper { position: relative; width: 100%; aspect-ratio: 21/10; background: #e5e7eb; border-radius: 0; }
        .slider-track { display: flex; height: 100%; transition: transform 0.5s ease-in-out; }
        .hero-slide { flex: none; width: 100%; height: 100%; background-size: cover; background-position: center; position: relative !important; cursor: pointer; }
        .slide-content { position: absolute; bottom: 0; left: 0; right: 0; padding: 16px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; z-index: 10; }
        .slide-title { font-size: 17px; font-weight: bold; margin-bottom: 4px; }
        .slide-tag { font-size: 10px; background: var(--primary); padding: 2px 6px; border-radius: 4px; margin-bottom: 4px; display: inline-block; }
        .slide-link-btn { display:none; }
        .indicator { width: 5px; height: 5px; border-radius: 50%; background: rgba(255,255,255,0.4); cursor: pointer; }
        .indicator.active { width: 15px; background: white; border-radius: 10px; }

        /* [ê°€ì´ë“œ ì•„ì´ì½˜ ê·¸ë¦¬ë“œ] */
        .guide-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .guide-icon-btn { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.1s; }
        .guide-icon-btn:active { transform: scale(0.96); }
        .guide-icon-box { 
            width: 52px; height: 52px; border-radius: 20px; 
            background: #f9fafb; display: flex; align-items: center; justify-content: center; 
            font-size: 24px; margin-bottom: 8px; border: 1px solid #f2f4f6;
        }
        .guide-icon-text { font-size: 12px; color: #4e5968; font-weight: 600; text-align: center; line-height: 1.3; }

        /* [í•˜ë‹¨ íƒ­ë°”] */
        .bottom-nav { 
            position: fixed; bottom: 0; left: 0; right: 0; 
            background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); 
            border-top: 1px solid #eee; padding: 8px 20px 20px 20px; 
            display: flex; justify-content: space-between; z-index: 100; 
        }
        .nav-btn { display: flex; flex-direction: column; align-items: center; gap: 4px; color: #b0b8c1; width: 60px; cursor: pointer; }
        .nav-btn svg { width: 24px; height: 24px; }
        .nav-btn span { font-size: 10px; font-weight: 500; }
        .nav-btn.active { color: #191f28; }
        .nav-btn.active span { font-weight: 700; }

        /* [ê°€ë¡œ ìŠ¤ì™€ì´í”„ ì»¨í…Œì´ë„ˆ ê³µí†µ] */
        .h-scroll-wrapper {
            display: flex; overflow-x: auto; gap: 12px; padding-bottom: 4px;
            scroll-snap-type: x mandatory;
        }
        .h-scroll-item {
            flex: 0 0 32%; /* í™”ë©´ì˜ ì•½ 1/3ì”© ì°¨ì§€ */
            min-width: 110px;
            scroll-snap-align: start;
            display: flex; flex-direction: column;
            background: var(--bg-card); 
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
        }
        .h-scroll-item:active { transform: scale(0.98); }

        /* ê° ì„¹ì…˜ë³„ ì•„ì´í…œ ë‚´ë¶€ ìŠ¤íƒ€ì¼ */
        .h-item-icon { font-size: 24px; margin-bottom: 8px; }
        .h-item-title { font-size: 13px; font-weight: 700; color: var(--text-main); margin-bottom: 2px; line-height: 1.3; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
        .h-item-sub { font-size: 11px; color: var(--text-sub); }
        
        .timer-h-card { border-left: 3px solid var(--primary); }
        .timer-h-card.urgent { border-left-color: #e53935; }

        /* [ìŠ¬ë¼ì´ë”] */
        .hero-section { margin: 0; border-radius: 0; overflow: hidden; border-bottom: 8px solid var(--bg-main); }
        .hero-slider-wrapper { position: relative; width: 100%; aspect-ratio: 21/10; background: var(--border-color); border-radius: 0; }
        .slider-track { display: flex; height: 100%; transition: transform 0.5s ease-in-out; }
        .hero-slide { flex: none; width: 100%; height: 100%; background-size: cover; background-position: center; position: relative !important; cursor: pointer; }
        .slide-content { position: absolute; bottom: 0; left: 0; right: 0; padding: 16px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; z-index: 10; }
        .slide-title { font-size: 17px; font-weight: bold; margin-bottom: 4px; }
        .slide-tag { font-size: 10px; background: var(--primary); padding: 2px 6px; border-radius: 4px; margin-bottom: 4px; display: inline-block; }
        .slide-link-btn { display:none; }
        .indicator { width: 5px; height: 5px; border-radius: 50%; background: rgba(255,255,255,0.4); cursor: pointer; }
        .indicator.active { width: 15px; background: white; border-radius: 10px; }

        /* [ê°€ì´ë“œ ìŠ¤ì™€ì…] */
        .guide-scroll-container {
            display: flex; overflow-x: auto; gap: 12px; padding-bottom: 10px;
            scroll-snap-type: x mandatory;
        }
        @media (min-width: 1024px) {
            .guide-scroll-container { display: grid; grid-template-columns: repeat(6, 1fr); overflow-x: visible; }
            .guide-indicators { display: none !important; }
        }
        .guide-icon-btn { 
            flex: 0 0 22%; scroll-snap-align: start;
            display: flex; flex-direction: column; align-items: center; cursor: pointer; 
        }
        .guide-icon-btn:active { transform: scale(0.96); }
        .guide-icon-box { 
            width: 48px; height: 48px; border-radius: 18px; 
            background: var(--bg-main); display: flex; align-items: center; justify-content: center; 
            font-size: 22px; margin-bottom: 6px; 
        }
        .guide-icon-text { font-size: 11px; color: var(--text-sub); font-weight: 600; text-align: center; line-height: 1.3; white-space: nowrap; }
        .guide-indicators { display: flex; justify-content: center; gap: 4px; margin-top: 5px; }
        .g-dot { width: 6px; height: 6px; border-radius: 50%; background: #e5e7eb; transition: all 0.3s; }
        .g-dot.active { background: var(--primary); width: 12px; border-radius: 4px; }

        /* [ë°”í…€ì‹œíŠ¸ ë° ê¸°íƒ€] */
        #timer-sheet-modal, #person-bottom-sheet { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 9999; display: none; opacity: 0; transition: opacity 0.2s; backdrop-filter: blur(2px); }
        #timer-sheet-modal.show, #person-bottom-sheet.active { display: block; opacity: 1; }
        .sheet-container, .bottom-sheet-content { position: absolute; bottom: 0; width: 100%; background: white; border-top-left-radius: 24px; border-top-right-radius: 24px; padding: 24px 24px 40px 24px; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1); max-height: 85vh; overflow-y: auto; box-shadow: 0 -4px 20px rgba(0,0,0,0.1); }
        #timer-sheet-modal.show .sheet-container, #person-bottom-sheet.active .bottom-sheet-content { transform: translateY(0); }
        .sheet-handle, .sheet-handle-bar { width: 40px; height: 4px; background: #e0e0e0; border-radius: 2px; margin: 0 auto 24px auto; opacity: 0.3; }

        /* ë””í…Œì¼ í—¤ë” (ë’¤ë¡œê°€ê¸°) */
        #header-detail-mode { width: 100%; display: none; align-items: center; gap: 10px; }
        .header-back-btn { display: flex; align-items: center; gap: 6px; font-size: 16px; font-weight: 700; color: #333; cursor: pointer; padding: 10px 0; }

        /* ê¸°íƒ€ ìƒì„¸í™”ë©´ ìŠ¤íƒ€ì¼ ë“±ì€ ê¸°ì¡´ ìœ ì§€ */
        .chunji-detail-card { background-color: #fff; padding: 24px; margin-bottom: 0; border-bottom: 1px solid #f2f4f6; }
        .cd-title { font-size: 22px; font-weight: 800; color: #333; margin-bottom: 6px; }
        .cd-text { font-size: 14px; color: #555; line-height: 1.6; background: #f2f4f6; padding: 12px; border-radius: 8px; white-space: pre-line; }
        .nav-btn-row { display: flex; justify-content: space-between; margin-top: 30px; padding-top: 20px; border-top: 1px solid #f2f4f6; }
        .nav-move-btn { display: flex; align-items: center; gap: 5px; font-size: 14px; font-weight: 600; color: #666; padding: 8px 12px; border-radius: 8px; transition: background 0.2s; }
        .nav-move-btn:hover { background: #f2f4f6; color: var(--primary); }

        /* ì‚¬ì´ë“œë°” ì˜¤ë²„ë ˆì´ */
        #sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); display: none; z-index: 2999; backdrop-filter: blur(2px); }
        #sidebar-overlay.active { display: block; }
    </style>
</head>

<body>
    <script>
        const EVENT_API_URL = "https://script.google.com/macros/s/AKfycbzSYkfFvOnpuL9MUWpHJk-wFa6_u8pAJW5OOVy0oYY8JK36E5n7oq7wxlMnU-vGKqBr/exec";
        const BUILD_API_URL = "https://script.google.com/macros/s/AKfycbz7c8YREyAa6aD1F3f7Hve3meAsOtjepSX_zyZLVbloj9qosdLgSArdBYFGKGYmNU2_tQ/exec";
    </script>

    <div id="sidebar-overlay" onclick="closeSidebar()"></div>

    <header id="main-header" class="app-header">
        
        <div id="header-main-mode">
            <img src="images/logo.png" alt="ì—°ìš´" class="logo-img" onclick="switchTab('home')" style="cursor:pointer;" onerror="this.style.display='none'; document.getElementById('txt-logo').style.display='block';">
            <span id="txt-logo" style="display:none; font-weight:900; font-size:20px; color:#333;">ì—°ìš´</span>
            
            <div class="header-actions">
                <div class="header-icon-btn" onclick="toggleSearchLayer(true)">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                </div>
                <div class="header-icon-btn" onclick="toggleSidebar()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </div>
            </div>
        </div>

        <div id="header-search-layer">
            <div class="header-search-box">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#888" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                <input type="text" id="header-search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" class="header-search-input" autocomplete="off">
            </div>
            <button onclick="toggleSearchLayer(false)" style="margin-left: 12px; font-size: 15px; font-weight: 600; color: #666; white-space: nowrap;">ì·¨ì†Œ</button>
        </div>

        <div id="header-detail-mode">
            <div class="header-back-btn" id="header-back-action">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                <span>ëª©ë¡ìœ¼ë¡œ</span>
            </div>
        </div>
        
        <div id="global-search-results" style="display:none; position:absolute; top:60px; left:0; right:0; background:#fff; z-index:60; height:100vh; padding:20px;"></div>
    </header>

    <aside id="main-sidebar">
        <div class="sidebar-header">
            <div class="sidebar-back-btn" onclick="closeSidebar()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            </div>
            <div class="sidebar-actions">
                <div class="sidebar-icon">ğŸ””</div> <div class="sidebar-icon">âš™ï¸</div> </div>
        </div>
        
        <div class="sidebar-content">
            <div class="sidebar-menu-group">
                <div class="sidebar-group-title">ë°”ë¡œê°€ê¸°</div>
                <div class="sidebar-item" onclick="switchTab('home'); closeSidebar();">
                    <span class="sidebar-item-icon">ğŸ </span> í™ˆ
                </div>
                <div class="sidebar-item" onclick="switchTab('todo'); closeSidebar();">
                    <span class="sidebar-item-icon">â°</span> ì˜¤ëŠ˜ì˜ í•  ì¼
                </div>
                <div class="sidebar-item" onclick="switchTab('quest'); closeSidebar();">
                    <span class="sidebar-item-icon">ğŸ“œ</span> ë¬´ë¦¼ë¡
                </div>
                <div class="sidebar-item" onclick="switchTab('chunji'); closeSidebar();">
                    <span class="sidebar-item-icon">ğŸº</span> ì²œì§€ë¡
                </div>
            </div>

            <div class="sidebar-menu-group">
                <div class="sidebar-group-title">ì»¤ë®¤ë‹ˆí‹°</div>
                <div class="sidebar-item" onclick="switchTab('quiz'); closeSidebar();">
                    <span class="sidebar-item-icon">â“</span> ìŠ¤ë¬´ê³ ê°œ ì¡±ë³´
                </div>
                <div class="sidebar-item" onclick="openGuideDirect('code.html'); closeSidebar();">
                    <span class="sidebar-item-icon">ğŸ«</span> êµí™˜ ì½”ë“œ
                </div>
                <div class="sidebar-item" onclick="openReportSheet(); closeSidebar();">
                    <span class="sidebar-item-icon">ğŸ“¢</span> ì œë³´í•˜ê¸°
                </div>
            </div>
            
            <div class="sidebar-menu-group">
                <div class="sidebar-group-title">ê¸°íƒ€ ì„œë¹„ìŠ¤</div>
                <div class="sidebar-item" onclick="location.href='https://wwm.tips'">
                    <span class="sidebar-item-icon">ğŸŒ</span> ê³µì‹ í™ˆí˜ì´ì§€ <span class="sidebar-item-sub">ì´ë™</span>
                </div>
            </div>
        </div>
    </aside>

    <main id="main-content">
        
        <div id="view-home">
            
            <section class="hero-section">
                <div class="hero-slider-wrapper">
                    <div id="hero-slider-track" class="slider-track"></div>
                    <div id="slider-indicators" class="absolute bottom-4 left-0 right-0 flex justify-center gap-1.5"></div>
                </div>
            </section>

                   <section class="toss-section">
                <div class="section-header">
                    <h3 class="section-title">ê¸°ë³¸ ê°€ì´ë“œ</h3>
                </div>
                <div class="guide-scroll-container no-scrollbar">
                    <a onclick="openGuideDirect('newb.html')" class="guide-icon-btn">
                        <div class="guide-icon-box" style="color:#d97706; background:#fffbf2;">ğŸ“œ</div>
                        <span class="guide-icon-text">ê°•í˜¸<br>ì…ë¬¸ì„œ</span>
                    </a>
                    <a onclick="openGuideDirect('guide/up.html')" class="guide-icon-btn">
                        <div class="guide-icon-box" style="color:#dc2626; background:#fef2f2;">ğŸ“ˆ</div>
                        <span class="guide-icon-text">ìœ¡ì„±<br>ê°€ì´ë“œ</span>
                    </a>
                    <a onclick="openGuideDirect('moon.html')" class="guide-icon-btn">
                        <div class="guide-icon-box" style="color:#4b5563; background:#f3f4f6;">ğŸ›ï¸</div>
                        <span class="guide-icon-text">ë¬¸íŒŒ<br>ì…ë¬¸</span>
                    </a>
                    <a onclick="openGuideDirect('guide/weapon.html')" class="guide-icon-btn">
                        <div class="guide-icon-box" style="color:#2563eb; background:#eff6ff;">âš”ï¸</div>
                        <span class="guide-icon-text">ì¥ë¹„<br>ë„ê°</span>
                    </a>
                    <a onclick="openGuideDirect('tier_weapon.html')" class="guide-icon-btn">
                        <div class="guide-icon-box" style="color:#7c3aed; background:#f5f3ff;">ğŸŒ€</div>
                        <span class="guide-icon-text">ë¬´ê³µ<br>ë„ê°</span>
                    </a>
                    <a onclick="openGuideDirect('majang.html')" class="guide-icon-btn">
                        <div class="guide-icon-box" style="color:#be123c; background:#fff1f2;">ğŸ€„</div>
                        <span class="guide-icon-text">ë§ˆì‘<br>ê°€ì´ë“œ</span>
                    </a>
                </div>
                <div class="guide-indicators" id="guide-dots">
                    <div class="g-dot active"></div>
                    <div class="g-dot"></div>
                </div>
            </section>

            <section class="toss-section">
                <div class="section-header">
                    <h3 class="section-title">ì˜¤ëŠ˜ì˜ í•  ì¼</h3>
                    <span class="section-more" onclick="switchTab('todo')">ì „ì²´ë³´ê¸° ></span>
                </div>
                <div id="gangho-timer-list">
                    <div style="text-align:center; color:#999; padding:20px;">ë¡œë”© ì¤‘...</div>
                </div>
            </section>

            <section class="toss-section">
                <div class="section-header">
                    <h3 class="section-title">ë¬´ë¦¼ë¡</h3>
                    <span class="section-more" onclick="switchTab('quest')">ì „ì²´ë³´ê¸° ></span>
                </div>
                <div id="mansarok-list" class="flex flex-col"></div>
            </section>

            <section class="toss-section">
                <div class="section-header">
                    <h3 class="section-title">ì²œì§€ë¡</h3>
                    <span class="section-more" onclick="switchTab('chunji')">ì „ì²´ë³´ê¸° ></span>
                </div>
                <div id="home-chunji-list" class="flex flex-col"></div>
            </section>

            <section class="toss-section" style="border-bottom:none;">
                <div class="section-header"><h3 class="section-title">ì¸ê¸° ì ìˆ˜</h3></div>
                <div class="flex overflow-x-auto gap-3 no-scrollbar" style="padding-bottom: 10px;">
                    <a onclick="location.href='https://wwm.tips/?q=193'" class="flex-none w-28 bg-white border border-gray-50 shadow-sm p-3 flex flex-col items-center cursor-pointer active:scale-95 transition-transform" style="border-radius:12px;">
                        <div class="w-full aspect-square bg-gray-50 flex items-center justify-center mb-2" style="border-radius:8px;"><img src="images/em/10.png" onerror="this.src='images/logo.png'" class="h-10 object-contain"></div>
                        <span class="text-[11px] font-bold text-gray-700 truncate w-full text-center">ë§ë ¹ ê³µì</span>
                    </a>
                    <a onclick="location.href='https://wwm.tips/?q=198'" class="flex-none w-28 bg-white border border-gray-50 shadow-sm p-3 flex flex-col items-center cursor-pointer active:scale-95 transition-transform" style="border-radius:12px;">
                        <div class="w-full aspect-square bg-gray-50 flex items-center justify-center mb-2" style="border-radius:8px;"><img src="images/em/4.png" onerror="this.src='images/logo.png'" class="h-10 object-contain"></div>
                        <span class="text-[11px] font-bold text-gray-700 truncate w-full text-center">ì—°ì‹¬</span>
                    </a>
                </div>
            </section>
        </div>

        <div id="view-todo" style="display: none;" class="px-4 pt-4">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-2"><span class="deco-bar"></span><h2 class="text-xl font-bold text-gray-800">ê°•í˜¸ ì‹œì‹œê°ê°</h2></div>
                <span id="server-time" class="text-xs text-gray-400 font-mono bg-white px-2 py-1 border border-gray-100 shadow-sm" style="border-radius:4px;">00:00:00</span>
            </div>
            <div id="gangho-timer-list-tab" class="space-y-3"></div>
        </div>

        <div id="view-quest" style="display: none;" class="px-4 pt-4">
            <div id="quest-list-view">
                <div class="filter-bar-wrapper mb-4 flex gap-2 overflow-x-auto no-scrollbar">
                    <select id="quest-type-select" class="bg-white border border-gray-200 text-sm p-2" style="border-radius:8px;" onchange="onQuestTypeChange()"><option value="all">ì „ì²´</option><option value="ë§Œì‚¬ë¡">ë§Œì‚¬ë¡</option><option value="íƒìƒ‰">íƒìƒ‰</option><option value="ì¸ì—°ì˜ ê¶¤ì ">ì¸ì—°ì˜ ê¶¤ì </option><option value="ì§€ê³¼">ì§€ê³¼</option></select>
                    <select id="quest-location-select" class="bg-white border border-gray-200 text-sm p-2" style="border-radius:8px;" onchange="applyQuestFilter()"><option value="all">ëª¨ë“  ì§€ì—­</option></select>
                </div>
                <div id="quest-grid-container"></div>
                <div id="pagination-container"></div>
            </div>
            <div id="quest-detail-view" style="display:none;">
                <div id="quest-content-loader"></div>
            </div>
        </div>

        <div id="view-chunji" style="display: none;" class="px-4 pt-4">
            <div id="chunji-list-view">
                <div class="mb-4 flex gap-2">
                    <select id="chunji-type-select" class="bg-white border border-gray-200 text-sm p-2" style="border-radius:8px;" onchange="onChunjiTypeChange()"><option value="all">ì „ì²´</option><option value="ë³‘ê¸°">ë³‘ê¸°</option><option value="í’ë¬¼">í’ë¬¼</option></select>
                    <select id="chunji-subtype-select" class="bg-white border border-gray-200 text-sm p-2" style="border-radius:8px;" onchange="applyChunjiFilter()"><option value="all">ëª¨ë“  í•­ëª©</option></select>
                </div>
                <div id="chunji-list-container" class="grid grid-cols-2 gap-2 pb-20"></div>
                <div id="chunji-pagination-container"></div>
            </div>
            <div id="chunji-detail-view" style="display:none;">
                <div id="chunji-detail-content"></div>
            </div>
        </div>

        <div id="view-quiz" style="display: none;" class="px-4 pt-4">
            <div id="quiz-counter-area" class="text-sm text-gray-500 mb-2">ë°ì´í„° ë¡œë”© ì¤‘...</div>
            <input type="text" id="quiz-local-search" class="w-full bg-white border border-gray-200 p-3 mb-4 text-sm" style="border-radius:8px;" placeholder="ë‹¨ì„œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ê°€ì‹œ)">
            <table class="answer-table w-full"><tbody id="quiz-table-body"></tbody></table>
        </div>
        
        <div id="view-archive" style="display: none;" class="px-4 pt-4"><div id="archive-grid-container"></div></div>
        <div id="view-guide" style="display: none;" class="px-4 pt-4"><div id="guide-content-loader"></div><div id="guide-dynamic-content"></div></div>
        <div id="view-code" style="display: none;" class="px-4 pt-4"><div id="code-content-loader"></div></div> 
        <div id="view-builder" style="display: none;" class="px-4 pt-4"><div id="tools-menu"><div id="build-list-container"></div></div><div id="builder-interface" style="display:none;"></div></div>
        <div id="view-map-detail" style="display: none; height: 100vh;"><iframe id="map-iframe" class="w-full h-full border-0"></iframe></div>
    </main>

    <nav class="bottom-nav" style="position: fixed; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border-top: 1px solid #eee; padding: 8px 20px 20px 20px; display: flex; justify-content: space-between; z-index: 100;">
        <div id="nav-home" onclick="switchTab('home')" class="nav-btn active" style="display: flex; flex-direction: column; align-items: center; gap: 4px; color: #333; width: 60px; cursor: pointer;">
            <svg viewBox="0 0 24 24" fill="currentColor" style="width: 24px; height: 24px;"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg><span style="font-size: 10px; font-weight: 700;">í™ˆ</span>
        </div>
        <div id="nav-quest" onclick="switchTab('quest')" class="nav-btn" style="display: flex; flex-direction: column; align-items: center; gap: 4px; color: #8b95a1; width: 60px; cursor: pointer;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 24px; height: 24px;"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span style="font-size: 10px; font-weight: 500;">ë¬´ë¦¼ë¡</span>
        </div>
        <div id="nav-todo" onclick="switchTab('todo')" class="nav-btn" style="display: flex; flex-direction: column; align-items: center; gap: 4px; color: #8b95a1; width: 60px; cursor: pointer;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 24px; height: 24px;"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg><span style="font-size: 10px; font-weight: 500;">í•  ì¼</span>
        </div>
        <div id="nav-quiz" onclick="switchTab('quiz')" class="nav-btn" style="display: flex; flex-direction: column; align-items: center; gap: 4px; color: #8b95a1; width: 60px; cursor: pointer;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 24px; height: 24px;"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg><span style="font-size: 10px; font-weight: 500;">ìŠ¤ë¬´ê³ ê°œ</span>
        </div>
    </nav>

    <div id="timer-sheet-modal">
        <div class="bottom-sheet-overlay absolute inset-0" onclick="closeTimerSheet()"></div>
        <div class="sheet-container">
            <div class="sheet-handle"></div>
            <div class="sheet-header flex justify-between items-center mb-6">
                <h3 id="timer-sheet-title" class="text-xl font-bold" style="color:var(--text-main);">ëª©ë¡</h3>
                <button onclick="closeTimerSheet()" class="w-8 h-8 rounded-full bg-gray-100 text-gray-500 flex items-center justify-center">âœ•</button>
            </div>
            <div id="timer-detail-content"></div>
        </div>
    </div>

    <div id="person-bottom-sheet">
        <div class="bottom-sheet-overlay absolute inset-0" onclick="closePersonDetail()"></div>
        <div class="bottom-sheet-content">
            <div id="person-detail-body"></div>
        </div>
    </div>
    
    <div id="report-sheet-modal" class="fixed inset-0 z-[9999] hidden">
        <div class="absolute inset-0 bg-black/50 transition-opacity" onclick="closeReportSheet()"></div>
        <div class="absolute bottom-0 w-full bg-white rounded-t-3xl p-6 transition-transform transform translate-y-full duration-300 ease-out" style="max-height: 80vh; overflow-y: auto;">
            <div class="w-10 h-1 bg-gray-300 rounded-full mx-auto mb-6"></div>
            <div class="flex border-b border-gray-200 mb-4">
                <button onclick="switchReportTab('report', this)" class="sheet-tab-btn flex-1 py-3 text-center text-sm font-bold text-gray-500 border-b-2 border-transparent active">ì œë³´í•˜ê¸°</button>
                <button onclick="switchReportTab('gift', this)" class="sheet-tab-btn flex-1 py-3 text-center text-sm font-bold text-gray-500 border-b-2 border-transparent">í›„ì›í•˜ê¸°</button>
            </div>
            <div id="tab-content-report">
                <div class="bg-gray-50 p-4 rounded-xl mb-4 text-sm text-gray-600 leading-relaxed">
                    ì˜¤ë¥˜ ì œë³´ë‚˜ ìƒˆë¡œìš´ ì •ë³´ëŠ” ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤.<br>
                    ì—¬ëŸ¬ë¶„ì˜ ì œë³´ê°€ ì—°ìš´ ìœ„í‚¤ë¥¼ ë§Œë“­ë‹ˆë‹¤!
                </div>
                <button onclick="window.open('https://open.kakao.com/o/sXW3q9bg', '_blank')" class="w-full py-4 bg-[#FEE500] rounded-xl font-bold text-[#3c1e1e] flex items-center justify-center gap-2">
                    ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ì œë³´í•˜ê¸°
                </button>
            </div>
            <div id="tab-content-gift" style="display:none;">
                <div class="text-center py-6">
                    <div class="text-4xl mb-2">â˜•</div>
                    <h3 class="text-lg font-bold mb-2">ê°œë°œìì—ê²Œ ì»¤í”¼ í•œ ì”</h3>
                    <p class="text-sm text-gray-500 mb-6">ì„œë²„ ìš´ì˜ê³¼ ê°œë°œì— í° í˜ì´ ë©ë‹ˆë‹¤.</p>
                    <div class="bg-gray-100 p-4 rounded-xl text-center font-mono text-sm text-gray-700 select-all">
                        kakaopay 3333-01-0000000
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="info-modal" class="hidden fixed inset-0 bg-black/50 z-[2000] flex items-center justify-center p-4" onclick="closeInfoModal()">
        <div class="bg-white rounded-2xl p-6 w-full max-w-sm" onclick="event.stopPropagation()">
            <div class="flex items-center gap-4 mb-4"><img id="modal-img" src="" class="w-16 h-16 object-contain border rounded-lg"><h3 id="modal-name" class="text-lg font-bold"></h3></div>
            <p id="modal-desc" class="text-sm text-gray-600 leading-relaxed"></p>
            <button onclick="closeInfoModal()" class="w-full mt-4 bg-gray-100 py-3 rounded-xl font-bold text-gray-700">ë‹«ê¸°</button>
        </div>
    </div>

    <script src="hw.js"></script>
    <script src="script.js"></script>
    <script src="timer.js"></script>

    <script>
        // ê²€ìƒ‰ ë ˆì´ì–´ í† ê¸€ í•¨ìˆ˜
        function toggleSearchLayer(show) {
            const searchLayer = document.getElementById('header-search-layer');
            const searchInput = document.getElementById('header-search-input');
            const searchResults = document.getElementById('global-search-results');

            if (show) {
                searchLayer.style.display = 'flex';
                searchInput.focus();
            } else {
                searchLayer.style.display = 'none';
                searchInput.value = '';
                if(searchResults) searchResults.style.display = 'none';
            }
        }

        // ì‚¬ì´ë“œë°” í† ê¸€
        function toggleSidebar() { 
            document.getElementById('main-sidebar').classList.add('active'); 
            document.getElementById('sidebar-overlay').classList.add('active');
            document.body.style.overflow = 'hidden'; 
        }
        function closeSidebar() { 
            document.getElementById('main-sidebar').classList.remove('active'); 
            document.getElementById('sidebar-overlay').classList.remove('active');
            document.body.style.overflow = ''; 
        }
        
        function openGuideDirect(url) {
            console.log("ê°€ì´ë“œ ì´ë™:", url);
            if (typeof loadGuideContent === 'function') {
                loadGuideContent(url); 
                switchTab('guide');
            } else {
                switchTab('guide');
            }
        }
        
        function closeTimerSheet() { 
            document.getElementById('timer-sheet-modal').classList.remove('show'); 
            document.body.style.overflow = ''; 
        }
        function closePersonDetail() { 
            document.getElementById('person-bottom-sheet').classList.remove('active'); 
            document.body.style.overflow = ''; 
        }

        // [í—¤ë” ëª¨ë“œ ë³€ê²½ í•¨ìˆ˜]
        function setHeaderMode(mode, returnAction) {
            const mainHeader = document.getElementById('header-main-mode');
            const detailHeader = document.getElementById('header-detail-mode');
            const backBtn = document.getElementById('header-back-action');

            if(mode === 'detail') {
                mainHeader.style.display = 'none';
                detailHeader.style.display = 'flex';
                backBtn.onclick = returnAction;
            } else {
                mainHeader.style.display = 'flex';
                detailHeader.style.display = 'none';
            }
        }

        // [ë¬´ë¦¼ë¡ ìƒì„¸]
        window.renderQuestDetailOverride = function(id) {
            document.getElementById('quest-list-view').style.display = 'none';
            document.getElementById('quest-detail-view').style.display = 'block';
            window.scrollTo(0,0);
            
            // í—¤ë”ë¥¼ ë””í…Œì¼ ëª¨ë“œë¡œ ë³€ê²½
            setHeaderMode('detail', () => {
                switchTab('quest'); // ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸° (íƒ­ ì´ˆê¸°í™”)
            });

            const quest = globalData.quests.find(q => q.id == id);
            if(!quest) return;

            let html = `
                <h2 class="text-xl font-bold mb-2">${quest.title}</h2>
                <div class="flex gap-2 mb-4">
                    <span class="text-xs bg-gray-100 px-2 py-1 rounded text-gray-600">${quest.type}</span>
                    <span class="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded">${quest.location}</span>
                </div>
                <div class="text-sm text-gray-700 leading-relaxed whitespace-pre-line">${quest.content || 'ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.'}</div>
                ${quest.image ? `<img src="${quest.image}" class="mt-4 w-full rounded-xl border" style="border-radius:0;">` : ''}
            `;

            // ë³¸ë¬¸ ë‚´ 'ëŒì•„ê°€ê¸°' ë²„íŠ¼ ì œê±°, í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ë§Œ ìœ ì§€
            const allIds = globalData.quests.map(q => q.id);
            const currIdx = allIds.indexOf(String(id));

            let navHtml = '<div class="nav-btn-row">';
            if (currIdx > 0) {
                navHtml += `<button onclick="renderQuestDetailOverride('${allIds[currIdx - 1]}')" class="nav-move-btn"><span class="text-lg">â†</span> ì´ì „</button>`;
            } else { navHtml += `<div></div>`; }

            if (currIdx < allIds.length - 1) {
                navHtml += `<button onclick="renderQuestDetailOverride('${allIds[currIdx + 1]}')" class="nav-move-btn">ë‹¤ìŒ <span class="text-lg">â†’</span></button>`;
            } else { navHtml += `<div></div>`; }
            navHtml += '</div>';

            document.getElementById('quest-content-loader').innerHTML = html + navHtml;
        };
        window.renderQuestDetail = window.renderQuestDetailOverride;

        // [ì²œì§€ë¡ ìƒì„¸]
        window.renderChunjiDetailOverride = function(id) {
            document.getElementById('chunji-list-view').style.display = 'none';
            document.getElementById('chunji-detail-view').style.display = 'block';
            window.scrollTo(0,0);

            // í—¤ë”ë¥¼ ë””í…Œì¼ ëª¨ë“œë¡œ ë³€ê²½
            setHeaderMode('detail', () => {
                switchTab('chunji'); // ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            });

            const item = chunjiData.find(c => c.id == id);
            if(!item) return;

            const imgTag = (src) => src ? `<img src="${src}" class="cd-img" onerror="this.style.display='none'">` : '';

            let bodyHtml = '';
            if (item.get || item.getimg1 || item.getimg2) {
                bodyHtml += `
                    <div class="cd-section">
                        <h3 class="cd-subtitle">íšë“ ë°©ë²•</h3>
                        <p class="cd-text">${item.get || ''}</p>
                        <div class="cd-img-container ${item.getimg1 && item.getimg2 ? 'grid-2' : ''}">
                            ${imgTag(item.getimg1)}
                            ${imgTag(item.getimg2)}
                        </div>
                    </div>`;
            }
            if (item.dsec || item.dsecimg1 || item.dsecimg2) {
                bodyHtml += `
                    <div class="cd-section">
                        <h3 class="cd-subtitle">ìƒì„¸ ë‚´ìš©</h3>
                        <p class="cd-text">${item.dsec || ''}</p>
                        <div class="cd-img-container ${item.dsecimg1 && item.dsecimg2 ? 'grid-2' : ''}">
                            ${imgTag(item.dsecimg1)}
                            ${imgTag(item.dsecimg2)}
                        </div>
                    </div>`;
            }
            if (!item.get && !item.dsec && !item.getimg1 && !item.dsecimg1) {
                const descText = item.content || item.desc || "ìƒì„¸ ë‚´ìš©ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.";
                bodyHtml += `
                    <div class="cd-section">
                        <h3 class="cd-subtitle">ì„¤ëª…</h3>
                        <p class="cd-text">${descText}</p>
                        ${item.image ? `<img src="${item.image}" class="cd-img mt-2">` : ''}
                    </div>`;
            }

            let html = `
                <div class="chunji-detail-card">
                    <div class="cd-header">
                        <span class="cd-badge">ì²œì§€ë¡</span>
                        <h2 class="cd-title">${item.title}</h2>
                    </div>
                    ${bodyHtml}
                </div>
            `;

            const allIds = chunjiData.map(c => c.id);
            const currIdx = allIds.indexOf(String(id));

            let navHtml = '<div class="nav-btn-row">';
            if (currIdx > 0) {
                navHtml += `<button onclick="renderChunjiDetailOverride('${allIds[currIdx - 1]}')" class="nav-move-btn"><span class="text-lg">â†</span> ì´ì „</button>`;
            } else { navHtml += `<div></div>`; }

            if (currIdx < allIds.length - 1) {
                navHtml += `<button onclick="renderChunjiDetailOverride('${allIds[currIdx + 1]}')" class="nav-move-btn">ë‹¤ìŒ <span class="text-lg">â†’</span></button>`;
            } else { navHtml += `<div></div>`; }
            navHtml += '</div>';

            document.getElementById('chunji-detail-content').innerHTML = html + navHtml;
        };
        window.loadChunjiDetail = window.renderChunjiDetailOverride;
        window.showChunjiDetail = window.renderChunjiDetailOverride;


        // [ì²œì§€ë¡ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ - ë‹¨ìˆœ ë¦¬ìŠ¤íŠ¸ í˜•íƒœ]
        window.renderChunjiListOverride = function() {
            const container = document.getElementById('chunji-list-container');
            if(!container) return;
            container.innerHTML = '';
            
            let filtered = chunjiData;
            if(typeof chunjiData === 'undefined') return;

            const typeFilter = document.getElementById('chunji-type-select').value;
            const subFilter = document.getElementById('chunji-subtype-select').value;

            filtered = chunjiData.filter(item => {
                if(typeFilter !== 'all' && item.type !== typeFilter) return false;
                if(subFilter !== 'all' && item.subtype !== subFilter) return false; 
                return true;
            });

            filtered.forEach(item => {
                const div = document.createElement('div');
                div.className = 'chunji-item-card'; 
                div.onclick = function() { renderChunjiDetailOverride(item.id); }; 
                div.innerHTML = `<span class="chunji-card-title">${item.title}</span>`;
                container.appendChild(div);
            });
        };
        window.renderChunjiList = window.renderChunjiListOverride;

        // [í™ˆ í™”ë©´ìš© ì²œì§€ë¡ ë Œë”ë§]
        window.renderHomeChunjiOverride = function() {
            const container = document.getElementById('home-chunji-list');
            if (!container || !chunjiData) return;
            container.innerHTML = '';
            const displayList = chunjiData.slice(0, 6);
            displayList.forEach(item => {
                const div = document.createElement('div');
                div.className = 'chunji-item-card'; // CSSì—ì„œ ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ê°•ì œ ë³€í™˜ë¨
                div.onclick = () => {
                    if (typeof switchTab === 'function') {
                        switchTab('chunji');
                        renderChunjiDetailOverride(item.id);
                    }
                };
                div.innerHTML = `<span class="chunji-card-title">${item.title}</span>`;
                container.appendChild(div);
            });
        };
        window.renderHomeChunji = window.renderHomeChunjiOverride;
        
        // [â˜…ìˆ˜ì •] íƒ€ì´ë¨¸ ì˜¤ë²„ë¼ì´ë“œ: ì‹œê³„ ì•„ì´ì½˜ ë³µêµ¬, ì¹´ë“œ í˜•íƒœ ê°œì„ 
        window.updateTimers = function() {
            // í™ˆ í™”ë©´ ë¦¬ìŠ¤íŠ¸
            const container = document.getElementById('gangho-timer-list');
            // í• ì¼ íƒ­ ë¦¬ìŠ¤íŠ¸ (ì „ì²´ë³´ê¸°)
            const tabContainer = document.getElementById('gangho-timer-list-tab');

            if (!container) return; 

            const now = new Date();
            const statusData = getCheckStatus(); 
            const serverTimeEl = document.getElementById('server-time');
            if (serverTimeEl) serverTimeEl.innerText = now.toTimeString().split(' ')[0];

            let html = '';

            TIMERS.forEach(timer => {
                let timeText = "";
                let isUrgent = false;
                let progressText = ""; 

                if (timer.type === 'reset') {
                    const target = getNextReset(timer.freq, now);
                    const diff = target - now;
                    timeText = formatTime(diff);
                    if (diff < 3 * 60 * 60 * 1000) isUrgent = true;

                    const tasks = TASK_DATA.filter(t => t.freq === timer.freq);
                    if (tasks.length > 0) {
                        const done = tasks.filter(t => statusData.checked[t.id]).length;
                        progressText = `<span class="timer-progress-text">[${done}/${tasks.length}]</span>`;
                    }
                } 
                else if (timer.type === 'daily_operating') {
                    const h = now.getHours();
                    if (h >= 5 && h < 7) timeText = "íœ´ì¥ ì¤‘";
                    else timeText = "ìš´ì˜ ì¤‘";
                }
                else {
                    timeText = "ì‹œê°„ í™•ì¸";
                }

                // [ìˆ˜ì •ëœ ë””ìì¸] ë„“ì€ ì¹´ë“œí˜• + ì•„ì´ì½˜
                html += `
                <div class="timer-row" onclick="openTimerSheetByName('${timer.name}')">
                    <div class="timer-icon-box">â°</div>
                    <div class="timer-info">
                        <div class="timer-name">
                            ${progressText} ${timer.name}
                        </div>
                        <div class="timer-desc">
                            <span>${timer.desc}</span>
                        </div>
                    </div>
                    <div class="timer-clock ${isUrgent ? 'urgent' : ''}">${timeText}</div>
                </div>`;
            });
            
            container.innerHTML = html;
            if(tabContainer) tabContainer.innerHTML = html;
        };
        
        window.openTimerSheetByName = function(name) {
            const timer = TIMERS.find(t => t.name === name);
            if(timer) openTimerSheet(timer);
        }

        // [â˜…ìˆ˜ì •] ë§Œì‚¬ë¡ ë¦¬ìŠ¤íŠ¸: ì§€ì—­ ë±ƒì§€ ì¶”ê°€ ë¡œì§
        async function loadMansarokMenu() {
            try {
                const response = await fetch('json/quests.json');
                if (!response.ok) throw new Error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');

                const data = await response.json();
                
                const mansarokContainer = document.getElementById('mansarok-list');
                const isPc = window.innerWidth >= 1024; 
                const limit = isPc ? 18 : 6;

                if (mansarokContainer) {
                    const mansarokList = data
                        .filter(item => !['ì§€ê³¼', 'ë³´ìŠ¤ ê³µëµ'].includes(item.type))
                        .slice(0, limit);

                    mansarokContainer.innerHTML = '';

                    mansarokList.forEach(item => {
                        const btn = document.createElement('a');
                        btn.className = 'mansarok-btn';
                        btn.href = "javascript:void(0);";
                        btn.onclick = () => {
                            switchTab('quest');
                            loadQuestDetail(item.filepath, item.id);
                        };
                        
                        // [â˜…ìˆ˜ì •] ì§€ì—­ ë±ƒì§€ ì¶”ê°€
                        const locBadge = item.location ? `<span class="list-loc-badge">[${item.location}]</span>` : '';
                        
                        btn.innerHTML = `${locBadge}<span>${item.name}</span>`;
                        mansarokContainer.appendChild(btn);
                    });
                }
            } catch (error) {
                console.error('ë§Œì‚¬ë¡ ë¡œë“œ ì—ëŸ¬:', error);
            }
        }

        window.switchTab = function(tabName) {
            // í—¤ë”ê°€ í•­ìƒ ë³´ì´ë„ë¡ ì„¤ì •
            setHeaderMode('main');
            
            const views = ['view-home', 'view-quest', 'view-chunji', 'view-quiz', 'view-archive', 'view-news', 'view-guide', 'view-code', 'view-builder', 'view-map-detail', 'view-todo'];
            views.forEach(v => { 
                const el = document.getElementById(v);
                if(el) el.style.display = (v === 'view-' + tabName) ? 'block' : 'none'; 
            });
            
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            const activeBtn = document.getElementById('nav-' + tabName);
            if(activeBtn) activeBtn.classList.add('active');
            
            if (tabName === 'todo' && typeof updateTimers === 'function') {
                updateTimers();
            }
            else if (tabName === 'quiz') {
                const tbody = document.getElementById('quiz-table-body');
                if (typeof globalData !== 'undefined' && globalData.quiz && tbody && tbody.children.length === 0) {
                    if(typeof renderQuizTable === 'function') renderQuizTable(globalData.quiz);
                    if(typeof updateQuizCounter === 'function') updateQuizCounter();
                }
            } else if (tabName === 'quest') {
                const container = document.getElementById('quest-grid-container');
                if (typeof globalData !== 'undefined' && globalData.quests && container && container.children.length === 0) {
                    if(typeof renderQuestList === 'function') renderQuestList();
                }
                if(typeof showQuestList === 'function') showQuestList();
            } else if (tabName === 'chunji') {
                if(typeof renderChunjiListOverride === 'function') {
                    renderChunjiListOverride(); 
                } else if(typeof renderChunjiList === 'function') {
                    renderChunjiList();
                }
                if(typeof showChunjiList === 'function') showChunjiList();
            }
            
            window.scrollTo(0, 0);
            if (typeof updateUrlQuery === 'function') {
                updateUrlQuery(tabName);
            }
        };

        setInterval(function() {
            if (typeof updateTimers === 'function') {
                updateTimers();
            }
        }, 1000);
        
        window.addEventListener('DOMContentLoaded', () => {
             if(typeof renderHomeChunjiOverride === 'function') renderHomeChunjiOverride();
             loadMansarokMenu();
        });
    </script>
</body>
</html>
