<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>연운: 한국 위키</title>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5SMVDZTDST"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-5SMVDZTDST');
    </script>
    <meta property="og:type" content="website">
    <meta property="og:description" content="강호의 고수가 되기 위한 필수 지침서. 일일/주간 숙제, 무림록, 최신 쿠폰 코드를 한눈에 확인하세요.">
    <meta name="description" content="강호의 고수가 되기 위한 필수 지침서. 일일/주간 숙제, 무림록, 최신 쿠폰 코드를 한눈에 확인하세요.">

    <meta property="og:title" content="연운 위키">    
    <meta property="og:image" content="fav/apple-icon-120x120.png">    
    <meta property="og:url" content="https://wwm.tips/">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

<link rel="apple-touch-icon" sizes="57x57" href="fav/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="fav/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="fav/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="fav/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="fav/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="fav/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="fav/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="fav/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="fav/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="fav/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="fav/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="fav/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="fav/favicon-16x16.png">
<link rel="manifest" href="fav/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="fav/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
   <script>
        // ★★★ 구글 앱스 스크립트 배포 URL (이벤트 페이지와 동일한 주소) ★★★
        const EVENT_API_URL = "https://script.google.com/macros/s/AKfycbzSYkfFvOnpuL9MUWpHJk-wFa6_u8pAJW5OOVy0oYY8JK36E5n7oq7wxlMnU-vGKqBr/exec";
        // 2. [추가] 빌드 공유용 주소 (새로 만든 스크립트 배포 주소)
        const BUILD_API_URL = "https://script.google.com/macros/s/AKfycbz7c8YREyAa6aD1F3f7Hve3meAsOtjepSX_zyZLVbloj9qosdLgSArdBYFGKGYmNU2_tQ/exec"; 

       /* document.addEventListener("DOMContentLoaded", function() {
            checkEventStatus(); // 이벤트 로직은 EVENT_API_URL을 사용 (수정 불필요)
        });*/

       function checkEventStatus() {
            const banner = document.getElementById('luckyBanner');
            const title = document.getElementById('luckyTitle');
            const desc = document.getElementById('luckyDesc');

            if (!banner) return; 

            // 로딩 중 클릭 방지
            banner.style.pointerEvents = 'none';
            banner.style.cursor = 'wait';
            banner.style.opacity = '0.7';

            // 1. 내 IP 가져오기
            fetch('https://api.ipify.org?format=json')
            .then(res => res.json())
            .then(ipData => {
                const userIp = ipData.ip;
                // 2. 서버에 상태 + 내 IP 전송
                return fetch(`${EVENT_API_URL}?action=status&ip=${userIp}`);
            })
            .then(response => response.text())
            .then(data => {
                // 로딩 해제
                banner.style.pointerEvents = 'auto'; 
                banner.style.cursor = 'pointer';
                banner.style.opacity = '1';

                // ★ [케이스 1] 내가 당첨자인 경우
                if (data.startsWith("MYWIN")) {
                    const myCode = data.split(":")[1]; // 코드 추출
                    
                    // 배너 스타일 (금색으로 강조하거나, 기본 빨강 유지)
                    banner.classList.remove('ended'); 
                    
                    // 클릭 시 코드 알림
                    banner.onclick = function(e) {
                        e.preventDefault(); // 페이지 이동 막기
                        alert(`축하합니다! 대협의 당첨 코드: [ ${myCode} ]\n잊지 말고 캡처해두시오!\n24시간 내에 등록되지 않을 경우 다음 이벤트를 위해 자동 환불 처리되오!`);
                    };

                    title.innerText = "🎉 축하하오! 당첨이오! 🎉";
                    // desc.style.fontWeight = "bold"; 
                    desc.innerText = "여기를 눌러 당첨 코드를 확인하시오!";
                
                // ★ [케이스 2] 다른 사람이 당첨되어 종료된 경우
                } else if (data.startsWith("GAMEOVER")) {
                    const parts = data.split(":");
                    let winnerName = "익명";
                    if (parts.length > 1) winnerName = parts[1];

                    // 흑백 처리
                    banner.classList.add('ended'); 
                    
                    banner.onclick = function(e) {
                        e.preventDefault(); 
                        alert(`이미 [${winnerName}]님이 당첨되셨습니다. 다음 기회에!`);
                    };
                    
                    title.innerText = "행운봉투 이벤트 종료"; 
                    title.style.color = "#ffcdd2"; 
                    desc.innerText = `${winnerName} 대협이 행운봉투를 여셨소!`;

                // ★ [케이스 3] 이벤트 진행 중
                } else {
                    banner.onclick = function() { location.href = 'event/'; };
                    title.innerText = "행운봉투 도착!"; 
                    desc.innerText = "소당주처럼 [새콤달콤]한 느낌으로!";
                }
            })
            .catch(err => {
                console.log("오류:", err);
                // 에러 발생 시 기본 복구
                banner.style.pointerEvents = 'auto';
                banner.style.cursor = 'pointer';
                banner.style.opacity = '1';
                banner.onclick = function() { location.href = 'event/'; };
            });
        }
    </script>
</body>
</html>
        
</head>
<body>

      <div id="fixed-top-bar">
        <header id="main-header">
            <div class="logo">
                <span class="logo-icon">
                    <a href="#" onclick="switchTab('home'); closeSidebar(); return false;">
                        <img src="images/logo.png" width="36px" height="36px" alt="로고">
                    </a>
                </span> 
            </div>
            
            <div class="search-container">
                <input type="text" id="header-search-input" placeholder="통합 검색" autocomplete="off">
                <button id="search-clear-btn" class="search-clear-btn" style="display:none;">X</button>
                <div id="global-search-results" class="search-dropdown"></div>
            </div>

            <button id="menu-toggle-btn" onclick="toggleSidebar()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
        </header>
        
        </div>


    <main id="main-content">

        <div id="view-home">
            <div class="hero-slider-wrapper">
                <div id="hero-slider-track" class="slider-track"></div>
                <div class="slider-controls">
                    <button class="slider-btn prev" onclick="moveSlide(-1)">❮</button>
                    <button class="slider-btn next" onclick="moveSlide(1)">❯</button>
                </div>
                <div id="slider-indicators" class="slider-indicators"></div>
            </div>
   <!-- 이벤트 -->
            <div id="luckyBanner" class="lucky-event-banner">
                <div class="lucky-content-wrapper">
                    <div class="lucky-seal-icon">
                        <span>福</span>
                    </div>
                    
                    <div class="lucky-text-group">
                        <div id="luckyTitle" class="lucky-title">행운 봉투 확인 중...</div>
                        <div id="luckyDesc" class="lucky-desc">웃음이 늘 있으면 행운도 늘 함께!</div>
                    </div>
                </div>
                <div class="lucky-action-btn">열어보기 ➔</div>
            </div>
          
<section class="timer-section">
    <div class="section-header-clickable">
        <h3><span class="deco-bar"></span>강호령</h3>
    </div>
    <div id="gangho-timer-list" class="map-grid">
        </div>
</section>

<div id="timer-sheet-modal" class="bottom-sheet-modal" onclick="closeTimerSheet(event)">
    <div class="sheet-container">
        <button type="button" class="sheet-close-btn" onclick="closeTimerSheet()">&times;</button>
        <div class="sheet-body-content" style="padding-top: 20px;">
            <div id="timer-detail-content">
                </div>
        </div>
    </div>
</div>

<section class="recent-updates-section">
                <div class="section-header-clickable">
                    <h3><span class="deco-bar"></span>커뮤니티 업데이트</h3>
                </div>
                <div id="home-recent-news" class="quest-grid"></div>
            </section>
            
<script src="timer.js"></script>
            <section class="profile-section" style="margin-top: 0; margin-bottom: 0;">
    <div class="section-header-clickable">
        <h3><span class="deco-bar"></span>인게임 제보</h3>
    </div>
    <!-- 윤쫑 -->
    <div class="ingame-report-card" onclick="openReportSheet()" style="cursor: pointer;">
        <div class="card-bg-deco"></div>

        <div class="char-portrait-box">
            <img src="images/profile.jpg" alt="윤쫑" onerror="this.src='images/logo.png'">
            <div class="char-level-bar">
                <span class="lvl-num">개발</span>
            </div>
        </div>

        <div class="char-info-box">
            <div class="char-header">
                <span class="char-name">윤쫑</span>
            </div>
            <div class="char-id-row">
                <span class="label">위키 이슈는 언제나 환영!</span>
            </div>
        </div>
    </div>
     <div class="ingame-report-card" onclick="openProgressSheet()" style="cursor: pointer;">
        <div class="card-bg-deco"></div>

        <div class="char-portrait-box">
            <img src="images/profile2.jpg" alt="" onerror="this.src='images/logo.png'">
            <div class="char-level-bar">
                <span class="lvl-num">정보</span>
            </div>
        </div>

        <div class="char-info-box">
            <div class="char-header">
                <span class="char-name">문진관 제자</span>
            </div>
            <div class="char-id-row">
                <span class="label">만사록 현황 확인하기</span>
            </div>
        </div>
     </div>
</section>

            <!--
<section class="boss-section">
    <div class="section-header-clickable" onclick="openGuideDirect('boss.html')">
        <h3><span class="deco-bar"></span>주요 보스 공략</h3>
    </div>
    
    <div id="home-boss-list" class="boss-grid" style="grid-template-columns: 1fr 1fr;"></div>
</section>-->

            <section class="map-section">
    <div class="section-header-clickable">
        <h3><span class="deco-bar"></span>지역 정보</h3>
    </div>
    <div id="home-map-list" class="map-grid"></div>
</section>
<!--
<section class="recent-updates-section">
    <div class="section-header-clickable"> <h3><span class="deco-bar"></span>화간유사</h3> </div>
    <div id="home-recent-news" class="video-grid"></div>
</section>
      -->
            
           <!-- 제보 -->
           
           <!-- <section class="community-updates-section" style="margin-top: 0px;">
                <div class="section-header-clickable">
                    <h3><span class="deco-bar"></span>수집된 무림록</h3>
                </div>
                <div id="home-community-news" class="quest-grid"></div>
            </section>-->

            
        

        </div>

        <div id="view-quiz" style="display: none;">
            <section id="answer-container">
                <div class="status-bar" id="quiz-counter-area">데이터 로딩 중...</div>
                <div class="inner-search-area">
                    <div class="search-input-wrapper">
                        <input type="text" id="quiz-local-search" class="inner-search-box" placeholder="단서를 입력하세요. (예: 가시)">
                    </div>
                </div>
                <div class="list-scroll-area">
                    <table class="answer-table">
                        <colgroup>
                            <col style="width: 30%">
                            <col style="width: 30%"> 
                            <col style="width: 40%"> 
                        </colgroup>
                        <thead>
                            <tr>
                                <th>단서</th>
                                <th>정답</th>
                                <th>제보</th> 
                            </tr>
                        </thead>
                        <tbody id="quiz-table-body"></tbody>
                    </table>
                </div>
            </section>
        </div>
       
        <div id="view-quest" style="display: none;">
            <section id="quest-list-view" style="margin-top: 0; padding: 0;">
              <!--  <div class="guide-grid-menu" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 30px; margin-top: 20px;">
                    <div class="guide-item-btn active" onclick="filterQuestType('all', this)"><span class="guide-title">전체</span></div>
                    <div class="guide-item-btn" onclick="filterQuestType('인연의 궤적', this)"><span class="guide-title">인연의 궤적</span></div>
                    <div class="guide-item-btn" onclick="filterQuestType('만사록', this)"><span class="guide-title">만사록</span></div>
                    <div class="guide-item-btn" onclick="filterQuestType('화간집', this)"><span class="guide-title">화간집</span></div>
                    <div class="guide-item-btn" onclick="filterQuestType('이벤트', this)"><span class="guide-title">이벤트</span></div>
                    <div class="guide-item-btn" onclick="filterQuestType('기타', this)"><span class="guide-title">기타</span></div>
                </div>-->
    
<div class="filter-bar-wrapper" style="margin-bottom: 20px; margin-top: 20px;">
    <select id="quest-type-select" class="custom-select" onchange="onQuestTypeChange()">
        <option value="all">전체</option>
        <option value="인연의 궤적">인연의 궤적</option>
        <option value="만사록">만사록</option>
        <option value="탐색">탐색</option>
        <option value="화간집">화간집</option>
        <option value="가이드">가이드</option>
        <option value="이벤트">이벤트</option>
        <option value="기타">기타</option>
    </select>

    <select id="quest-location-select" class="custom-select" onchange="applyQuestFilter()">
        <option value="all">모든 지역</option>
    </select>
</div>

                <div style="border-bottom: 2px solid var(--wuxia-accent-red); padding-bottom: 8px; margin-bottom: 10px;">
                    <span style="background-color: var(--wuxia-accent-gold); color: #fff; padding: 2px 8px; border-radius: 2px; font-weight: bold; font-size: 0.8em; vertical-align: middle;">목록</span>
                    <h2 style="color: var(--wuxia-accent-gold); display: inline-block; margin: 0 0 0 10px; vertical-align: middle;">무림록</h2>
                    <p style="color: var(--wuxia-text-sub); font-size: 0.9em; margin-top: 2px;">게임 내 퀘스트, 세계관, 만사록 정보를 확인하세요.</p>
                </div>
                
                <div id="quest-grid-container" class="quest-grid"></div>
                <div id="pagination-container" class="pagination-controls"></div>
            </section>
            
            <section id="quest-detail-view" style="display: none;">
                <button class="back-button" onclick="showQuestList()">← 목록으로 돌아가기</button>
                <div id="quest-content-loader" class="detail-content-box">로딩 중...</div>
            </section>
        </div>
        
<div id="view-chunji" style="display: none;">
    <section id="chunji-list-view" style="margin-top: 0; padding: 0;">
        
        <div class="filter-bar-wrapper" style="margin-bottom: 20px; margin-top: 20px;">
            <select id="chunji-type-select" class="custom-select" onchange="onChunjiTypeChange()">
                <option value="all">전체</option>
                <option value="병기">병기</option>
                <option value="협도">협도</option>
                <option value="음식">음식</option>
                <option value="풍물">풍물</option>
                <option value="시화">시화</option>
            </select>

            <select id="chunji-subtype-select" class="custom-select" onchange="applyChunjiFilter()">
                <option value="all">모든 항목</option>
            </select>
        </div>
        <div style="border-bottom: 2px solid var(--wuxia-accent-red); padding-bottom: 8px; margin-bottom: 20px;">
            <span style="background-color: var(--wuxia-accent-gold); color: #fff; padding: 2px 8px; border-radius: 2px; font-weight: bold; font-size: 0.8em; vertical-align: middle;">목록</span>
            <h2 style="color: var(--wuxia-accent-gold); display: inline-block; margin: 0 0 0 10px; vertical-align: middle;">천지록</h2>
            <p style="color: var(--wuxia-text-sub); font-size: 0.9em; margin-top: 2px;">유물의 획득처와 해독법을 기록한 고서입니다.</p>
        </div>
        
        <div id="chunji-list-container" class="chunji-list"></div>
         <div id="chunji-pagination-container" class="pagination-controls" style="margin-top: 20px; margin-bottom: 20px;"></div>
    </section>
    
    <section id="chunji-detail-view" style="display: none;">
        <button class="back-button" onclick="showChunjiList()">← 목록으로 돌아가기</button>
        <div id="chunji-detail-content" class="detail-content-box"></div>
    </section>
</div>



        <div id="view-news" style="display: none;">
            <section style="margin-top: 30px;">
                <div class="large-font-chunk" style="margin-bottom: 20px; border:none; background:none; padding-left:0;">
                    <h2 style="color:var(--wuxia-accent-gold); margin:0;">공지사항</h2>
                </div>
                <div id="full-news-list" class="item-list-container"></div>
            </section>
        </div>
        
        <div id="view-guide" style="display: none;">
            <div id="guide-content-loader" style="margin-top: 0px; text-align: center;">로딩 중...</div>
        </div>

     <div id="view-builder" style="display: none;">
            <div id="tools-menu" style="margin-top: 20px; padding: 0 5px;">
                <div class="guide-grid-menu" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 10px;">
                    <div class="guide-item-btn active" onclick="filterBuilds('all', this)">전체</div>
                    <div class="guide-item-btn" onclick="filterBuilds('PvE', this)">탐험 (PvE)</div>
                    <div class="guide-item-btn" onclick="filterBuilds('PvP', this)">논검 (PvP)</div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr; gap: 8px; margin-bottom: 20px;">
                    <button onclick="document.getElementById('tools-menu').style.display='none'; document.getElementById('builder-interface').style.display='block';" 
                            style="padding: 12px 0; background-color: #fff; border: 1px solid #ddd; border-radius: 4px; color: #333; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px; transition: all 0.2s;"
                            onmouseover="this.style.borderColor='var(--wuxia-accent-gold)'; this.style.color='var(--wuxia-accent-gold)'"
                            onmouseout="this.style.borderColor='#ddd'; this.style.color='#333'">
                        <span>✍️</span> 빌드 만들기
                    </button>
                
                </div>
                <div id="build-list-container" class="build-list-wrapper">
                    <div style="text-align:center; padding: 30px; color: #999;">
                        불러오는 중...
                    </div>
                </div>
            </div>

            <div id="builder-interface" style="display: none;">
                <button class="back-button" onclick="closeBuilderInterface()">
                    ← 목록으로 돌아가기
                </button>
                <div class="quest-detail-container" style="margin-top: 10px;">
                    <div style="border-bottom: 2px solid var(--wuxia-accent-red); padding-bottom: 15px; margin-bottom: 20px;">
                        <span style="background-color: var(--wuxia-accent-gold); color: #fff; padding: 2px 8px; border-radius: 2px; font-weight: bold; font-size: 0.8em; vertical-align: middle;">도구</span>
                        <h2 style="color: var(--wuxia-accent-gold); display: inline-block; margin: 0 0 0 10px; vertical-align: middle;">
                            나만의 빌드
                        </h2>
                        <p style="color: var(--wuxia-text-sub); font-size: 0.9em; margin-top: 5px;">원하는 장비와 무공을 조합하여 공유하세요.</p>
                    </div>
            
                    <div style="margin-bottom: 30px;">
                        <span class="slot-label">무기 및 무술 (2)</span>
                        <div class="slot-group">
                            <div class="slot-wrapper">
                                <div class="item-slot" onclick="openBuilderModal('weapons', 0)"><span>+</span><img id="slot-weapons-0" style="display:none;"></div>
                                <div class="slot-name" id="name-weapons-0"></div>
                            </div>
                            <div class="slot-wrapper">
                                <div class="item-slot" onclick="openBuilderModal('weapons', 1)"><span>+</span><img id="slot-weapons-1" style="display:none;"></div>
                                <div class="slot-name" id="name-weapons-1"></div>
                            </div>
                        </div>
                    
                        <span class="slot-label">심법 (4)</span>
                        <div class="slot-group">
                            <div class="slot-wrapper">
                                <div class="item-slot" onclick="openBuilderModal('hearts', 0)"><span>+</span><img id="slot-hearts-0" style="display:none;"></div>
                                <div class="slot-name" id="name-hearts-0"></div>
                            </div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('hearts', 1)"><span>+</span><img id="slot-hearts-1" style="display:none;"></div><div class="slot-name" id="name-hearts-1"></div></div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('hearts', 2)"><span>+</span><img id="slot-hearts-2" style="display:none;"></div><div class="slot-name" id="name-hearts-2"></div></div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('hearts', 3)"><span>+</span><img id="slot-hearts-3" style="display:none;"></div><div class="slot-name" id="name-hearts-3"></div></div>
                        </div>
                    <div style="margin-bottom: 30px;">
    
    
                    </div>
                        <span class="slot-label">비결 (8)</span>
                        <div class="slot-group">
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('marts', 0)"><span>+</span><img id="slot-marts-0" style="display:none;"></div><div class="slot-name" id="name-marts-0"></div></div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('marts', 1)"><span>+</span><img id="slot-marts-1" style="display:none;"></div><div class="slot-name" id="name-marts-1"></div></div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('marts', 2)"><span>+</span><img id="slot-marts-2" style="display:none;"></div><div class="slot-name" id="name-marts-2"></div></div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('marts', 3)"><span>+</span><img id="slot-marts-3" style="display:none;"></div><div class="slot-name" id="name-marts-3"></div></div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('marts', 4)"><span>+</span><img id="slot-marts-4" style="display:none;"></div><div class="slot-name" id="name-marts-4"></div></div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('marts', 5)"><span>+</span><img id="slot-marts-5" style="display:none;"></div><div class="slot-name" id="name-marts-5"></div></div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('marts', 6)"><span>+</span><img id="slot-marts-6" style="display:none;"></div><div class="slot-name" id="name-marts-6"></div></div>
                            <div class="slot-wrapper"><div class="item-slot" onclick="openBuilderModal('marts', 7)"><span>+</span><img id="slot-marts-7" style="display:none;"></div><div class="slot-name" id="name-marts-7"></div></div>
                        </div>
                    </div>
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <span class="slot-label" style="margin-top: 0;">🔥 추천 콤보</span>
        <button onclick="resetComboSlots()" style="font-size:0.8em; color:#999; background:none; border:none; cursor:pointer;">↺ 초기화</button>
    </div>
                    <div class="slot-group" id="combo-slot-container">
                    </div>
                    <div class="builder-footer">
                        <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; border: 1px solid #eee; margin-bottom: 15px;">
    
    <div style="display: flex; gap: 20px; margin-bottom: 15px; justify-content: center;">
        <label style="cursor: pointer; display: flex; align-items: center; gap: 5px; font-weight: bold;">
            <input type="radio" name="buildType" value="PvE" checked> 🌲 탐험 (PvE)
        </label>
        <label style="cursor: pointer; display: flex; align-items: center; gap: 5px; font-weight: bold;">
            <input type="radio" name="buildType" value="PvP"> ⚔️ 논검 (PvP)
        </label>
    </div>

    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
        <div style="flex: 1; text-align: left;">
            <span class="slot-label" style="margin-top: 0; border: none; padding: 0; margin-bottom: 5px; font-size: 0.85em;">✍️ 빌드 이름</span>
            <input type="text" id="build-title" placeholder="예: 무적의 우산" maxlength="20" 
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
        </div>
        <div style="flex: 1; text-align: left;">
            <span class="slot-label" style="margin-top: 0; border: none; padding: 0; margin-bottom: 5px; font-size: 0.85em;">👤 닉네임</span>
            <input type="text" id="build-creator" placeholder="작성자명" maxlength="10" 
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
        </div>
    </div>

    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
        <div style="flex: 1; text-align: left;">
            <span class="slot-label" style="margin-top: 0; border: none; padding: 0; margin-bottom: 5px; font-size: 0.85em;">⚔️ 추천 무기</span>
            <input type="text" id="rec-weapons" placeholder="예: 비준 세트" maxlength="20" 
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
        </div>
        <div style="flex: 1; text-align: left;">
            <span class="slot-label" style="margin-top: 0; border: none; padding: 0; margin-bottom: 5px; font-size: 0.85em;">🛡️ 추천 방어구</span>
            <input type="text" id="rec-armor" placeholder="예: 이설 세트" maxlength="20" 
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
        </div>
    </div>

    <div style="margin-bottom: 10px; text-align: left;">
        <span class="slot-label" style="margin-top: 0; border: none; padding: 0; margin-bottom: 5px; font-size: 0.85em;">📝 설명 (선택)</span>
        <textarea id="build-desc" placeholder="빌드의 특징이나 운영법을 간단히 적어주세요." rows="3"
                  style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; resize: none; font-family: inherit;"></textarea>
    </div>
</div>

                        <div style="display: flex; gap: 10px;">
                            <button class="browse-button" style="flex: 1; background-color: #555;" onclick="generateBuildUrl()">🔗 링크만 복사</button>
                            <button class="browse-button" style="flex: 2; background-color: var(--wuxia-accent-gold);" onclick="shareBuildToCloud()">📤 빌드 공유하기</button>
                        </div>
                        <input type="text" id="result-url" readonly onclick="this.select()" style="display:none; margin-top:10px; width:100%;">
                    </div>
                    
                    <div id="builder-modal" class="modal-overlay" onclick="closeBuilderModal(event)" style="display:none;">
                        <div class="modal-content" onclick="event.stopPropagation()"> 
                            <h3 id="builder-modal-title" style="margin-top:0;">아이템 선택</h3>
                            <div id="builder-modal-list" class="item-list-grid"></div>
                            <button onclick="closeBuilderModal(null)" style="margin-top:20px; width:100%; padding:10px;">닫기</button>
                        </div>
                    </div>
                </div> 
            </div> 
            
            <style>
            /* --- 헤더 레이아웃 수정 --- */
#main-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 15px;
    height: 60px; /* 높이 고정 */
    box-sizing: border-box;
    background: #fff; /* 배경색 */
    border-bottom: 1px solid #eee;
}

/* 검색바가 남은 공간을 차지하도록 */
.search-container {
    flex: 1;
    margin: 0 15px; /* 양옆 간격 */
    position: relative;
}

/* 메뉴 버튼 스타일 */
#menu-toggle-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: #333;
    padding: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* --- 사이드바 (심플 디자인) --- */
#sidebar-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.3); /* 배경 어둡기 조절 */
    z-index: 9998;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
}
#sidebar-overlay.active {
    opacity: 1;
    pointer-events: auto;
}

#main-sidebar {
    position: fixed;
    top: 0; right: -260px; /* 너비 260px */
    width: 260px;
    height: 100%;
    background: #fff;
    z-index: 9999;
    box-shadow: -5px 0 15px rgba(0,0,0,0.05); /* 그림자 은은하게 */
    transition: right 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    display: flex;
    flex-direction: column;
    padding-top: 10px;
    box-sizing: border-box;
}
#main-sidebar.active {
    right: 0;
}

/* 헤더: 아주 심플하게 */
.sidebar-header {
    padding: 10px 25px 20px 25px; /* 여백 조정 */
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.sidebar-header h3 {
    margin: 0;
    font-size: 1.2em;
    font-weight: 700;
    color: #333;
}
.close-sidebar-btn {
    background: none;
    border: none;
    font-size: 1.2em;
    cursor: pointer;
    color: #333;
    padding: 0;
}

.sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: 0 10px; /* 좌우 여백 약간 */
}

/* 메뉴 아이템: 아이콘 제거, 텍스트 위주 */
.sidebar-item {
    padding: 14px 15px;
    font-size: 1em;
    font-weight: 500;
    color: #333;
    cursor: pointer;
    display: flex;
    justify-content: space-between; /* 화살표 정렬용 */
    align-items: center;
    border-radius: 8px; /* 둥근 모서리 */
    transition: background 0.2s, color 0.2s;
    margin-bottom: 2px;
}
.sidebar-item:hover {
    background-color: #f7f7f7;
    color: #000;
}

/* 화살표: 작고 심플하게 */
.sidebar-item .arrow {
    font-size: 0.7em;
    color: #999;
    transition: transform 0.3s;
}
.sidebar-item.expanded .arrow {
    transform: rotate(180deg);
}
.sidebar-item.expanded {
    font-weight: 700; /* 열렸을 때 강조 */
}

/* 서브메뉴: 배경색 없이 들여쓰기만 */
.sidebar-sub-list {
    display: none;
    padding: 5px 0 10px 0;
}
.sidebar-sub-list button {
    display: block;
    width: 100%;
    text-align: left;
    padding: 10px 15px 10px 35px; /* 들여쓰기 */
    background: none;
    border: none;
    font-size: 0.95em;
    color: #666;
    cursor: pointer;
    border-radius: 8px;
    transition: color 0.2s;
}
.sidebar-sub-list button:hover {
    color: var(--wuxia-accent-gold, #d4af37); /* 호버 시 강조색 */
    background-color: #fafafa;
}
/* 상단 헤더 높이와 본문 여백을 강제로 맞춤 */
#fixed-top-bar {
    height: 60px !important;       /* 헤더 높이 고정 */
    overflow: visible !important;  /* 내용물이 잘리지 않도록 */
}

#main-content {
    padding-top: 60px !important;  /* 본문을 헤더 바로 밑(60px)에서 시작하게 당김 */
    margin-top: 0 !important;      /* 혹시 모를 외부 여백 제거 */
}

/* (혹시 슬라이더 자체에 여백이 있다면 제거) */
.hero-slider-wrapper {
    margin-top: 0 !important;
}
/* --- 사이드바 화살표 (얇은 선 스타일) --- */
.sidebar-item .arrow {
    display: inline-block;
    width: 8px;              /* 화살표 너비 */
    height: 8px;             /* 화살표 높이 */
    border: solid #999;      /* 선 색상 */
    border-width: 0 2px 2px 0; /* 오른쪽, 아래쪽만 선을 그림 (ㄱ자 반대 모양) */
    transform: rotate(45deg); /* -45도 회전시켜서 오른쪽(>)을 보게 함 */
    transition: transform 0.3s ease; /* 부드러운 회전 */
    margin-right: 5px;       /* 위치 조정 */
    margin-bottom: 2px;      /* 높이 미세 조정 */
}

/* 메뉴가 열렸을 때 (아래로 회전) */
.sidebar-item.expanded .arrow {
    transform: rotate(-135deg); /* 45도 회전시켜서 아래쪽(v)을 보게 함 */
    border-color: var(--wuxia-accent-gold, #d4af37); /* 열리면 색상 강조 (선택사항) */
}

/* 족보 메뉴 등 화살표 숨길 곳은 유지 */

            </style>

            <div id="build-detail-overlay" class="bottom-sheet-overlay" onclick="if(event.target === this) closeBuildDetailSheet(event)"></div>
            <div id="<build-de></build-de>tail-sheet" class="bottom-sheet" onclick="event.stopPropagation()">
                <div class="sheet-header">
                    <h3 id="build-sheet-title">빌드 상세 정보</h3>
                    <button onclick="closeBuildDetailSheet(null)" class="close-sheet-btn">✕</button>
                </div>
                <div class="sheet-content build-detail-content">
                    <div style="text-align: center; padding: 50px; color: #999;">데이터 로딩 중...</div>
                </div>
            </div>
        </div>
        
        <div id="view-map-detail" style="display: none; height: 100%;">
            <div style="margin-top: 20px; border-bottom: 2px solid var(--wuxia-accent-red); padding-bottom: 10px; margin-bottom: 15px; display: flex; align-items: center; justify-content: space-between;">
                <div style="display: flex; align-items: center;">
                    <button class="back-button" onclick="closeMapDetail()" style="margin: 0 15px 0 0;">← 돌아가기</button>
                    <div style="display: inline-block;">
                        <span style="background-color: var(--wuxia-accent-gold); color: #fff; padding: 2px 8px; border-radius: 2px; font-weight: bold; font-size: 0.8em; vertical-align: middle;">지도</span>
                        <h2 id="map-detail-title" style="display: inline-block; color: var(--wuxia-accent-gold); margin: 0 0 0 5px; vertical-align: middle;">
                            지도 상세
                        </h2>
                    </div>
                </div>
            </div>

            <div class="quest-detail-container" style="padding: 0; overflow: hidden; height: calc(100vh - 250px); background: #1a1a1a; border: 1px solid #333;">
                <iframe id="map-iframe" src="" frameborder="0" style="width: 100%; height: 100%; display: block;"></iframe>
            </div>
        </div>
        
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                if (new URLSearchParams(window.location.search).get('b')) {
                    document.getElementById('tools-menu').style.display = 'none';
                    document.getElementById('builder-interface').style.display = 'block';
                }
            });
            // 사이드바 열기/닫기 토글
function toggleSidebar() {
    const sidebar = document.getElementById('main-sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    
    // 클래스 토글로 CSS 애니메이션 작동
    if (sidebar.classList.contains('active')) {
        closeSidebar();
    } else {
        sidebar.classList.add('active');
        overlay.classList.add('active');
        // 스크롤 방지 (선택사항)
        document.body.style.overflow = 'hidden';
    }
}

// 사이드바 닫기
function closeSidebar() {
    const sidebar = document.getElementById('main-sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    
    sidebar.classList.remove('active');
    overlay.classList.remove('active');
    document.body.style.overflow = '';
}

// 사이드바 내부 서브메뉴 토글 (아코디언 효과)
function toggleSidebarSub(element) {
    // 클릭된 요소의 다음 형제 요소(리스트)를 찾음
    const subList = element.nextElementSibling;
    
    // 표시 상태 토글
    if (subList.style.display === 'block') {
        subList.style.display = 'none';
        element.classList.remove('expanded');
    } else {
        subList.style.display = 'block';
        element.classList.add('expanded');
    }
}

        </script>

    </main>
   
    <footer id="main-footer" style="padding: 20px 15px; margin-top: 30px;">
        <div class="version-info" style="margin-bottom: 5px;">
            「연운」 한국 위키 <span style="font-size: 0.8em; font-weight: normal; color: #666;">v1.0</span>
        </div>
        
        <p class="copyright-disclaimer" style="margin-bottom: 10px; font-size: 0.75em;">
            본 위키는 팬에 의해 제작/운영되며 공식 위키가 아닙니다.<br>
            데이터의 저작권은 원저작권자에게 있습니다.
        </p>

        <div style="margin-top: 10px;">
            <a href="https://wwm.tips/qna" target="_blank" style="color: #555; font-size: 0.85em; text-decoration: none;">
                문의 및 제보
            </a>
            <span style="color: #ccc; margin: 0 8px; font-size: 0.8em;">|</span>
            <a href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'}); return false;" style="color: #555; font-size: 0.85em; text-decoration: none;">
                맨 위로
            </a>
        </div>
       <div id="sidebar-overlay" onclick="closeSidebar()"></div>
    <aside id="main-sidebar">
        <div class="sidebar-header">
            <h3>메뉴</h3>
            <button class="close-sidebar-btn" onclick="closeSidebar()">✕</button>
        </div>
        
        <div class="sidebar-content">
            <div class="sidebar-item" id="nav-home" onclick="closeSidebar(); switchTab('home');">
                홈
            </div>

            <div class="sidebar-group">
                <div class="sidebar-item has-sub" id="nav-code" onclick="toggleSidebarSub(this)">
                    <span>비급 (가이드)</span>
                    <span class="arrow"></span>
                </div>
                <div class="sidebar-sub-list">
                    <button onclick="closeSidebar(); openGuideDirect('npc.html');">할 일 (숙제)</button>
                    <button onclick="closeSidebar(); openGuideDirect('harts.html');">심법 도감</button>
                    <button onclick="closeSidebar(); openGuideDirect('marts.html');">비결 도감</button>
                    <button onclick="closeSidebar(); openGuideDirect('boss.html');">보스 공략</button>
                    <button onclick="closeSidebar(); openGuideDirect('sim.html');">심력 계산기</button>
                    <button onclick="closeSidebar(); openGuideDirect('code.html');">교환 코드</button>
                </div>
            </div>

            <div class="sidebar-item" id="nav-quest" onclick="closeSidebar(); switchTab('quest');">
                무림록
            </div>

            <div class="sidebar-item" id="nav-chunji" onclick="closeSidebar(); switchTab('chunji');">
                천지록
            </div>

            <div class="sidebar-group">
                <div class="sidebar-item has-sub" id="nav-tool" onclick="toggleSidebarSub(this)">
                    <span>족보 (도구)</span>
                    <span class="arrow"></span>
                </div>
                <div class="sidebar-sub-list">
                    <button id="nav-quiz" onclick="closeSidebar(); switchTab('quiz');">스무고개</button>
                    <button id="nav-builder" onclick="closeSidebar(); switchTab('builder');">빌드 메이커</button>
                    <button id="nav-map" onclick="location.href='map/'">지도</button>
                </div>
            </div>
        </div>
    </aside>

        <p style="margin-top: 15px; margin-bottom: 0; font-size: 0.7em; color: #999;">
            &copy; 2025 WWM.TIPS. All rights reserved.
        </p>
    </footer>
    <script src="hw.js"></script>
    <script src="script.js"></script>
 <script src="calc.js"></script>

    <div id="report-sheet-modal" class="bottom-sheet-modal" onclick="closeReportSheet(event)">
    <div class="sheet-container">
        <button type="button" class="sheet-close-btn" onclick="closeReportSheet()">
            &times; </button>
        <div class="sheet-tabs">
            <button class="sheet-tab-btn active" onclick="switchReportTab('report', this)">인게임 제보</button>
            <button class="sheet-tab-btn" onclick="switchReportTab('gift', this)">응원하기</button>
        </div>

        <div class="sheet-body-content">
            
            <div id="tab-content-report" class="tab-content-item" style="display: block;">
                <div style="padding: 20px 0;">
                    
                    <p style="color: #555; line-height: 1.6; margin-bottom: 20px; font-size: 0.95em;">
                      위키에 오류가 발생하거나 이미지 누락 등 이슈 발견 시 인게임 내 <strong>귓속말</strong>로 제보해 주시면 보다 빠르게 확인 후 처리 할 수 있습니다.
                    </p>
                    
                    <div style="background-color: #fff5f5; border: 1px dashed #ef9a9a; border-radius: 4px; padding: 15px;">
                        <p style="color: #c62828; font-weight: bold; font-size: 0.9em; margin: 0 0 5px 0;">⚠ 주의사항</p>
                        <p style="color: #d32f2f; font-size: 0.85em; margin: 0; line-height: 1.4;">
                            위키 오류 제보 외의 사적인 메시지나 장난성 귓속말을 보내시는 경우,답변 없이 <strong>차단</strong>될 수 있습니다.
                        </p>
                    </div>

                    <div style="margin-top: 20px; text-align: center;">
                        <button onclick="copyToClipboard('0047792402', this)" style="background: #333; color: #fff; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 0.9em;">
                            '윤쫑' ID 복사하기
                        </button>
                    </div>
                </div>
            </div>

            <div id="tab-content-gift" class="tab-content-item" style="display: none;">
                <div style="padding: 20px 0;">
                    <p style="color: #666; font-size: 0.9em; margin-bottom: 20px; line-height: 1.5;">
                        커피보단 인게임 내 프로필에서 <strong>좋아요</strong>를 눌러 응원해주세요.
                    </p>

                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        
                        <div style="border: 1px solid #eee; border-radius: 4px; overflow: hidden;">
                            <div style="background: #f9f9f9; padding: 8px 12px; font-size: 0.85em; font-weight: bold; color: #555;">
                                STEP 1.친구 추가 > ID 입력
                            </div>
                            <div style="height: 90px; background: #eee; display: flex; align-items: center; justify-content: center; color: #aaa;">
                                <img src="images/step1.jpg" alt="ID검색" style="width:100%; height:100%; object-fit:cover;">
                            </div>
                        </div>

                        <div style="border: 1px solid #eee; border-radius: 4px; overflow: hidden;">
                            <div style="background: #f9f9f9; padding: 8px 12px; font-size: 0.85em; font-weight: bold; color: #555;">
                                STEP 2.좌측 상단 좋아요 버튼 클릭
                            </div>
                            <div style="height: 90px; background: #eee; display: flex; align-items: center; justify-content: center; color: #aaa;">
                                <img src="images/step2.jpg" alt="좋아요클릭" style="width:100%; height:100%; object-fit:cover;">
                            </div>
                        </div>
                        <div style="margin-top: 10px; text-align: center;">
                        <button onclick="copyToClipboard('0047792402', this)" style="background: #333; color: #fff; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 0.9em;">
                            '윤쫑' ID 복사하기
                        </button>
                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<div id="progress-sheet-modal" class="bottom-sheet-modal" onclick="closeProgressSheet(event)">
    <div class="sheet-container">
        
        <button type="button" class="sheet-close-btn" onclick="closeProgressSheet()">
            &times; 
        </button>

        <div class="sheet-tabs">
            <button class="sheet-tab-btn active" onclick="switchProgressTab('status', this)">진행 현황</button>
            <button class="sheet-tab-btn" onclick="switchProgressTab('cheer', this)">응원하기</button>
        </div>

        <div class="sheet-body-content">
            
            <div id="tab-p-status" class="tab-content-item" style="display: block;">
                <div style="padding: 20px 0;">
                    <p style="color: #666; font-size: 0.9em; margin-bottom: 15px;">
                        현재 수집된 무림록 및 업데이트 현황입니다.
                    </p>
                    
                    <div id="home-community-news" class="quest-grid" style="display: block;"></div>
                </div>
            </div>

<div id="tab-p-cheer" class="tab-content-item" style="display: none;">
    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 60px 20px; text-align: center;">
        
        <div style="font-size: 3em; margin-bottom: 20px;">🙏</div>
        
        <p style="font-size: 1.1em; font-weight: bold; color: #333; margin: 0 0 10px 0; font-family: 'Noto Serif KR', serif;">
            응원은 마음으로 받겠습니다.
        </p>
        
        <p style="font-size: 1em; color: #666; margin: 0; font-family: 'Noto Serif KR', serif;">
            대협!
        </p>
        
    </div>
</div>


        </div>
    </div>
</div>
<div id="info-modal" class="info-modal-overlay" onclick="closeInfoModal()">
    <div class="info-modal-card" onclick="event.stopPropagation()">
        <button class="close-modal-btn" onclick="closeInfoModal()">✕</button>
        <div class="info-header">
            <img id="modal-img" src="" onerror="this.src='images/logo.png'">
            <h3 id="modal-name">아이템 이름</h3>
        </div>
        <div class="info-body">
            <p id="modal-desc">설명 데이터가 없습니다.</p>
        </div>
    </div>
</div>

</body> 
</html>

</body>
</html>
