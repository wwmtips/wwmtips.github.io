<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—°ìš´ ë¹Œë“œ ë·°ì–´</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css"> 
    <link rel="apple-touch-icon" sizes="57x57" href="/fav/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/fav/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/fav/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/fav/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/fav/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/fav/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/fav/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/fav/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/fav/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/fav/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/fav/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/fav/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* ë·°ì–´ ì „ìš© ìŠ¤íƒ€ì¼ */
        body.viewer-mode {
            background-color: var(--wuxia-bg-deep, #f4f4f2);
            font-family: 'Noto Serif KR', serif;
            padding: 20px;
            text-align: center;
        }

        .viewer-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #fff;
            padding: 40px 20px; /* ìƒë‹¨ ì—¬ë°± ì¡°ê¸ˆ ë” ì¤Œ */
            border-radius: 8px;
            border: 1px solid #ddd;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        /* [ìˆ˜ì •] ë©”ì¸ íƒ€ì´í‹€ (ì œì‘ì ì´ë¦„ì˜ ë¹Œë“œ) */
        .viewer-title {
            color: var(--wuxia-text-main, #1a1a1a); /* ì´ë¦„ì€ ì§„í•˜ê²Œ */
            font-size: 2.2em; /* í¬ê¸° í‚¤ì›€ */
            margin: 0 0 10px 0;
            font-weight: bold;
            line-height: 1.2;
        }

        /* [ìˆ˜ì •] ì„œë¸Œ íƒ€ì´í‹€ (ì¶”ì²œ ë¬´ê³µ ì¡°í•© - ê³ ì •) */
        .viewer-subtitle {
            display: inline-block;
            color: var(--wuxia-accent-gold, #a08040); /* ê¸ˆìƒ‰ í¬ì¸íŠ¸ */
            font-size: 1.1em;
            font-weight: bold;
            padding: 5px 20px;
            border-top: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
            margin-bottom: 40px; /* ìŠ¬ë¡¯ê³¼ì˜ ê°„ê²© */
        }

        /* ì„¹ì…˜ ë¼ë²¨ */
        .slot-label {
            display: block;
            text-align: left;
            font-weight: bold;
            color: var(--wuxia-text-main, #1a1a1a);
            margin: 25px 0 15px 0;
            font-size: 1.1em;
            border-left: 4px solid var(--wuxia-accent-red, #b71c1c);
            padding-left: 10px;
        }

        /* ìŠ¬ë¡¯ ê·¸ë£¹ */
        .slot-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        /* ì•„ì´í…œ ìŠ¬ë¡¯ */
        .item-slot {
            width: 70px;
            height: 70px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
            transition: transform 0.2s;
        }
        .item-slot:hover {
            border-color: var(--wuxia-accent-gold, #a08040);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }

        .item-slot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
            display: none;
        }

        /* ì•„ì´í…œ ì´ë¦„ */
        .slot-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 70px;
        }
        .slot-name {
            font-size: 0.8em;
            color: #555;
            margin-top: 8px;
            line-height: 1.3;
            word-break: keep-all;
            min-height: 2.4em;
        }

        /* í•˜ë‹¨ ë²„íŠ¼ */
        .viewer-footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px dashed #ddd;
        }
        .action-btn {
            background-color: var(--wuxia-accent-gold, #a08040);
            color: #fff;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            border-radius: 4px;
            font-family: 'Noto Serif KR', serif;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: background 0.2s;
        }
        .action-btn:hover {
            background-color: #8d6e35;
        }
        /* [NEW] ë²„íŠ¼ ê·¸ë£¹ ìŠ¤íƒ€ì¼ (ë²„íŠ¼ ë‘ ê°œë¥¼ ë‚˜ë€íˆ ë°°ì¹˜) */
        .viewer-footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px dashed #ddd;
            display: flex;
            justify-content: center;
            gap: 15px; /* ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
        }

        /* [NEW] ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìƒ‰ìƒ (ì§„í•œ ë¨¹ìƒ‰) */
        .download-btn {
            background-color: var(--wuxia-text-main, #1a1a1a);
        }
        .download-btn:hover {
            background-color: #333;
        }
        
        /* ëª¨ë°”ì¼ì—ì„œ ë²„íŠ¼ ì„¸ë¡œ ë°°ì¹˜ */
        @media (max-width: 600px) {
            .viewer-footer {
                flex-direction: column;
            }
            .action-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body class="viewer-mode">

    <div class="viewer-container" id="capture-area">
        
        <h1 class="viewer-title" id="build-main-title">
            ë¡œë”© ì¤‘...
        </h1>
        
        <div class="viewer-subtitle">
            ì¶”ì²œ ë¬´ê³µ ì¡°í•©
        </div>
        
        <div class="slot-label">ë¬´ê¸° ë° ë¬´ìˆ </div>
        <div class="slot-group" id="weapon-slots">
            <div class="slot-wrapper">
                <div class="item-slot" id="v-weapons-0"><img src="" alt=""></div>
                <div class="slot-name" id="name-v-weapons-0"></div>
            </div>
            <div class="slot-wrapper">
                <div class="item-slot" id="v-weapons-1"><img src="" alt=""></div>
                <div class="slot-name" id="name-v-weapons-1"></div>
            </div>
        </div>

        <div class="slot-label">ì‹¬ë²•</div>
        <div class="slot-group" id="heart-slots">
            <div class="slot-wrapper"><div class="item-slot" id="v-hearts-0"><img src="" alt=""></div><div class="slot-name" id="name-v-hearts-0"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-hearts-1"><img src="" alt=""></div><div class="slot-name" id="name-v-hearts-1"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-hearts-2"><img src="" alt=""></div><div class="slot-name" id="name-v-hearts-2"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-hearts-3"><img src="" alt=""></div><div class="slot-name" id="name-v-hearts-3"></div></div>
        </div>

        <div class="slot-label">ë¹„ê²°</div>
        <div class="slot-group" id="mart-slots">
            <div class="slot-wrapper"><div class="item-slot" id="v-marts-0"><img src="" alt=""></div><div class="slot-name" id="name-v-marts-0"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-marts-1"><img src="" alt=""></div><div class="slot-name" id="name-v-marts-1"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-marts-2"><img src="" alt=""></div><div class="slot-name" id="name-v-marts-2"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-marts-3"><img src="" alt=""></div><div class="slot-name" id="name-v-marts-3"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-marts-4"><img src="" alt=""></div><div class="slot-name" id="name-v-marts-4"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-marts-5"><img src="" alt=""></div><div class="slot-name" id="name-v-marts-5"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-marts-6"><img src="" alt=""></div><div class="slot-name" id="name-v-marts-6"></div></div>
            <div class="slot-wrapper"><div class="item-slot" id="v-marts-7"><img src="" alt=""></div><div class="slot-name" id="name-v-marts-7"></div></div>
        </div>

       <div class="viewer-footer" data-html2canvas-ignore="true">
            <button class="action-btn download-btn" onclick="downloadBuildImage()">ğŸ’¾ ì´ë¯¸ì§€ë¡œ ì €ì¥</button>
            <button class="action-btn" onclick="location.href='index.html?tab=builder'">âš”ï¸ ë‚˜ë§Œì˜ ë¹Œë“œ ë§Œë“¤ê¸°</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            if (typeof loadViewer === 'function') {
                loadViewer();
            }
        });
    </script>
</body>
</html>
